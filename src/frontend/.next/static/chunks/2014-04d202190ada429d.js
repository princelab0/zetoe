"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2014],{44231:(e,s,t)=>{t.d(s,{F:()=>R,K:()=>T});var l=t(74494),n=t(79790),a=t(41839);let r=(0,n.memo)(a.o,(e,s)=>e.children===s.children&&e.className===s.className);var i=t(52125),d=t(28931),o=t.n(d),c=t(71221),m=t(39771),x=t(9252),u=t(11294),h=t(14968),f=t(33077);let p=e=>{let{number:s,href:t}=e;return'\n  <button className="select-none no-underline">\n  <a className="" href="'.concat(t,'" target="_blank">\n        <span className="relative -top-[0rem] inline-flex">\n          <span className="h-[1rem] min-w-[1rem] items-center justify-center rounded-full text-center px-1 text-xs font-mono bg-muted text-[0.60rem] text-muted-foreground">\n            ').concat(s,"\n          </span>\n        </span>\n      </a>\n    </button>")},g=e=>{let{children:s,isStreaming:t,containerElement:a="p"}=e,r=e=>"string"==typeof e?(t?function(e){let s=e.split(" ");return o().chunk(s,2).map(e=>e.join(" ")+" ")}(e):[e]).flatMap((e,s)=>(0,l.jsx)("span",{className:(0,c.cn)(t?"animate-in fade-in-25 duration-700":""),children:e},"".concat(s,"-streaming"))):n.isValidElement(e)?n.cloneElement(e,e.props,r(e.props.children)):Array.isArray(e)?e.map((e,s)=>(0,l.jsx)(n.Fragment,{children:r(e)},s)):null,i=r(s);return n.createElement(a,{},i)},v=(0,n.memo)(e=>{let{children:s}=e;return(0,l.jsx)(g,{isStreaming:!0,containerElement:"p",children:s})}),j=(0,n.memo)(e=>{let{children:s}=e;return(0,l.jsx)(g,{isStreaming:!1,containerElement:"p",children:s})}),N=(0,n.memo)(e=>{let{children:s}=e;return(0,l.jsx)(g,{isStreaming:!1,containerElement:"li",children:s})}),w=(0,n.memo)(e=>{let{children:s}=e;return(0,l.jsx)(g,{isStreaming:!0,containerElement:"li",children:s})});v.displayName="StreamingParagraph",j.displayName="Paragraph",N.displayName="ListItem",w.displayName="StreamingListItem";let b=e=>{let{children:s,isExpanded:t,onToggle:a,isStreaming:r}=e,i=(0,n.useRef)(null);return console.log("ThinkBox Render - isExpanded:",t,"isStreaming:",r),(0,n.useEffect)(()=>{if(r&&i.current){let e=setInterval(()=>{var e;x.Nk.scrollTo(i.current.scrollHeight,{duration:2e3,smooth:"easeInOutQuad",containerId:(null===(e=i.current)||void 0===e?void 0:e.id)||"think-scroll-container"})},1e3);return()=>clearInterval(e)}},[r]),console.log("ThinkBox - Applying class:",{isStreaming:r,isExpanded:t,className:(0,c.cn)("mt-1 text-sm text-gray-700 prose dark:prose-invert",r?"h-20 overflow-y-auto":t?"h-auto":"h-0 overflow-hidden")}),(0,l.jsxs)("div",{className:"my-4 bg-transparent rounded-3xl shadow-sm border border-neutral-500/40",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-1 justify-center items-start cursor-pointer",onClick:()=>{console.log("Header clicked, toggling isExpanded"),a()},children:[(0,l.jsxs)("div",{className:"text-base w-full flex items-center justify-between text-[#0A0a0a] px-5 pt-4  ",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{children:(0,l.jsx)(u.A,{width:16,height:16})}),(0,l.jsx)("span",{className:"font-semibold",children:"Thought for "}),(0,l.jsx)("span",{className:"font-medium text-[hsl(216,4%,51%)] text-sm ",children:r?"...":"9s"})]}),(0,l.jsx)("span",{className:"text-xs text-gray-500",children:t?(0,l.jsx)(h.A,{}):(0,l.jsx)(f.A,{})})]}),(0,l.jsxs)("p",{className:"w-full align-middle ml-0.5 font-semibold text-sm text-gray-500 px-5 pb-4",children:[t?"Collapse":"Expand"," for details"]})]}),(0,l.jsx)("div",{ref:i,id:"think-scroll-container",className:(0,c.cn)("mt-1 px-5  font-medium break-words !leading-[1.8] max-w-full text-sm  prose dark:prose-invert",r?"h-20 overflow-y-auto":t?"h-auto":"h-0 overflow-hidden"),style:{transition:"height 0.3s ease"},children:s})]})},E=e=>{let{message:s,isStreaming:t=!1}=e,{content:a,sources:d}=s,[o,c]=(0,n.useState)(a),[m,x]=(0,n.useState)(t);console.log("MessageComponent Render - isExpanded:",m,"isStreaming:",t),(0,n.useEffect)(()=>{let e=a.match(/<think>([\s\S]*?)<\/think>/),s=a;if(e){let t=e[1].trim();s=a.replace(/<think>[\s\S]*?<\/think>/,'<div class="thinking-content">'.concat(t,"</div>"))}let t=s.replace(/(\[\d+\])/g,e=>{var s;let t=e.slice(1,-1),l=null==d?void 0:d.find((e,s)=>s+1===parseInt(t));return p({number:parseInt(t),href:null!==(s=null==l?void 0:l.url)&&void 0!==s?s:""})});c(t),console.log("Parsed Message:",t)},[a,d]),(0,n.useEffect)(()=>{t&&(console.log("Streaming started, setting isExpanded to true"),x(!0))},[t]);let u=o.match(/<div class="thinking-content">([\s\S]*?)<\/div>/),h=u?u[1]:"",f=u?o.replace(/<div class="thinking-content">[\s\S]*?<\/div>/,"").trim():o;return(0,l.jsxs)(l.Fragment,{children:[h&&(0,l.jsx)(b,{isExpanded:m,onToggle:()=>{console.log("Toggling isExpanded from:",m),x(e=>{let s=!e;return console.log("New isExpanded value:",s),s})},isStreaming:t,children:(0,l.jsx)(r,{components:{p:t?v:j,li:t?w:N},rehypePlugins:[i.A],children:h})},"think-box-".concat(m)),f&&(0,l.jsx)(r,{components:{p:t?v:j,li:t?w:N},className:"prose dark:prose-invert inline leading-relaxed break-words mt-2",rehypePlugins:[i.A],children:f})]})},y=()=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(m.E,{className:"w-full py-4 bg-card",children:(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsx)(m.E,{className:"mx-5 h-2 bg-primary/30"}),(0,l.jsx)(m.E,{className:"mx-5 h-2 bg-primary/30 mr-20"}),(0,l.jsx)(m.E,{className:"mx-5 h-2 bg-primary/30 mr-40"})]})})});var k=t(69371);function _(e){let{questions:s,onSelect:t}=e;return(0,l.jsx)("div",{className:"divide-y border-t mt-2",children:s.map((e,s)=>(0,l.jsxs)("div",{className:"flex cursor-pointer items-center py-2 font-medium justify-between ",onClick:()=>t(e),children:[(0,l.jsx)("span",{children:e.toLowerCase()}),(0,l.jsx)(k.A,{className:"text-tint mr-2",size:20})]},"question-".concat(s)))})}var A=t(17230),L=t(99415),I=t(21136),S=t(93572);let C=()=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"my-4 grid grid-cols-1 gap-2 lg:grid-cols-2 w-full",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,l.jsx)("div",{className:"w-full h-full",children:(0,l.jsx)(m.E,{className:"rounded-md object-cover shadow-none border-none w-full bg-card h-[160px] "})},"image-skeleton-".concat(s)))})});function P(e){let{images:s}=e;return s&&s.length>0?(0,l.jsx)("div",{className:"my-4 grid grid-cols-1 gap-2 lg:grid-cols-2",children:s.map(e=>(0,l.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"aspect-video w-full h-full overflow-hidden hover:scale-[1.03] duration-150 rounded-lg transition-all shadow-md",children:(0,l.jsx)("img",{src:e,className:"w-full object-cover object-top h-full max-h-[80vh]"})},e))}):null}function T(e){let{content:s}=e;return(0,l.jsxs)(S.Fc,{className:"bg-red-500/5 border-red-500/15 p-5 mb-10",children:[(0,l.jsx)(I.A,{className:"h-4 w-4 stroke-red-500 stroke-2"}),(0,l.jsx)(S.TN,{className:"text-base text-foreground",children:s.split(" ").map((e,s)=>/(https?:\/\/[^\s]+)/g.test(e)?(0,l.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"underline",children:e},s):e+" ")})]})}let R=e=>{let{message:s,isStreaming:t=!1,onRelatedQuestionSelect:n}=e,{sources:a,content:r,related_queries:i,images:d,is_error_message:o=!1}=s;return o?(0,l.jsx)(T,{content:s.content}):(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)(L.w,{title:"Answer",animate:t,streaming:t,children:r?(0,l.jsx)(E,{message:s,isStreaming:t}):(0,l.jsx)(y,{})}),(0,l.jsx)(L.w,{title:"Sources",animate:t,children:a&&0!==a.length?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(A.LT,{results:a})}):(0,l.jsx)(A.qT,{})}),(0,l.jsx)(L.w,{title:"Images",animate:t,children:d&&d.length>0?(0,l.jsx)(P,{images:d}):(0,l.jsx)(C,{})}),i&&i.length>0&&(0,l.jsx)(L.w,{title:"Related",animate:t,children:(0,l.jsx)(_,{questions:i,onSelect:n})})]})}},17230:(e,s,t)=>{t.d(s,{gu:()=>u,LT:()=>h,qT:()=>x});var l=t(74494),n=t(79790),a=t(64684),r=t(39771),i=t(27644),d=t(71221);let o=i.bL,c=i.l9,m=n.forwardRef((e,s)=>{let{className:t,align:n="center",sideOffset:a=4,...r}=e;return(0,l.jsx)(i.UC,{ref:s,align:n,sideOffset:a,className:(0,d.cn)("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})});m.displayName=i.UC.displayName;let x=()=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"flex flex-wrap w-full",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,l.jsx)("div",{className:"w-1/2 md:w-1/4 p-1",children:(0,l.jsx)(r.E,{className:"rounded-md shadow-none border-none h-[70px] bg-card "})},"skeleton-".concat(s)))})}),u=e=>{let{url:s}=e;return(0,l.jsx)("div",{className:"rounded-full overflow-hidden relative",children:(0,l.jsx)("img",{className:"block relative",src:"https://www.google.com/s2/favicons?sz=128&domain=".concat(s),alt:"favicon",width:16,height:16})})};function h(e){let{results:s}=e,[t,r]=(0,n.useState)(!1),i=t?s:s.slice(0,3),d=s.length>3?s.length-3:0,x=s.slice(3,3+d);return(0,l.jsxs)("div",{className:"flex flex-wrap w-full ",children:[i.map((e,s)=>{let{title:t,url:n,content:r}=e,i=new URL(n).hostname.split(".").slice(-2,-1)[0];return(0,l.jsxs)(o,{children:[(0,l.jsx)(c,{asChild:!0,children:(0,l.jsx)("div",{className:"w-1/2 md:w-1/4 p-1",children:(0,l.jsx)("a",{className:"",href:n,target:"_blank",children:(0,l.jsx)(a.Zp,{className:"flex-1 rounded-md flex-col shadow-none border-none h-[70px]",children:(0,l.jsxs)(a.Wu,{className:"p-2 flex flex-col justify-between h-full",children:[(0,l.jsx)("p",{className:"text-xs line-clamp-2 font-medium text-foreground/80",children:t}),(0,l.jsxs)("div",{className:"flex space-x-1",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"rounded-full overflow-hidden relative",children:(0,l.jsx)(u,{url:n})}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground truncate font-medium",children:i})]}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground font-medium",children:"\xb7"}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground truncate font-medium",children:s+1})]})]})})})})}),(0,l.jsx)(m,{className:"w-80 py-2",children:(0,l.jsx)("div",{className:"flex justify-between space-x-4",children:(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"rounded-full overflow-hidden relative",children:(0,l.jsx)(u,{url:n})}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground truncate font-medium",children:i})]}),(0,l.jsx)("p",{className:"text-sm font-medium",children:t}),(0,l.jsx)("span",{className:"text-sm line-clamp-3 font-light text-foreground/90",children:r})]})})})]},"source-".concat(s))}),!t&&d>0&&(0,l.jsx)("div",{className:"cursor-pointer w-1/2 md:w-1/4  p-1",onClick:()=>r(!0),children:(0,l.jsx)(a.Zp,{className:"flex-1 rounded-md flex-col shadow-none border-none h-[70px]",children:(0,l.jsxs)(a.Wu,{className:"p-2 flex flex-col justify-between h-full",children:[(0,l.jsx)("div",{className:"flex items-center space-x-2",children:x.map((e,s)=>{let{url:t}=e;return(0,l.jsx)(u,{url:t},"logo-".concat(s))})}),(0,l.jsxs)("div",{className:"text-xs text-muted-foreground truncate font-medium",children:["View ",d," more"]})]})})})]})}},99415:(e,s,t)=>{t.d(s,{w:()=>m});var l=t(74494),n=t(71221),a=t(47435),r=t(44051),i=t(31518),d=t(84412),o=t(36583),c=t(31447);let m=e=>{let{title:s,children:t,animate:m=!0,streaming:x=!1}=e,u={Sources:a.A,Answer:r.A,Related:i.A,Images:d.A}[s]||o.A;return(0,l.jsxs)("div",{className:(0,n.cn)("flex flex-col mb-8",m?"animate-in fade-in duration-1000 ease-out":""),children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:["Answer"===s&&x?(0,l.jsx)(c.P.div,{animate:{rotate:[0,360]},transition:{repeat:1/0,duration:1.5,ease:"linear"},children:(0,l.jsx)(u,{size:22})}):(0,l.jsx)(u,{size:22}),(0,l.jsx)("div",{className:"text-lg font-medium",children:s})]}),(0,l.jsx)("div",{className:"pt-1",children:t})]})}},93572:(e,s,t)=>{t.d(s,{Fc:()=>d,TN:()=>c,XL:()=>o});var l=t(74494),n=t(79790),a=t(16983),r=t(71221);let i=(0,a.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=n.forwardRef((e,s)=>{let{className:t,variant:n,...a}=e;return(0,l.jsx)("div",{ref:s,role:"alert",className:(0,r.cn)(i({variant:n}),t),...a})});d.displayName="Alert";let o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,l.jsx)("h5",{ref:s,className:(0,r.cn)("mb-1 font-medium leading-none tracking-tight",t),...n})});o.displayName="AlertTitle";let c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("text-sm [&_p]:leading-relaxed",t),...n})});c.displayName="AlertDescription"},39771:(e,s,t)=>{t.d(s,{E:()=>a});var l=t(74494),n=t(71221);function a(e){let{className:s,...t}=e;return(0,l.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-primary/10",s),...t})}},65256:(e,s,t)=>{t.d(s,{_:()=>r});var l=t(85670),n=t(41209),a=t(5183);let r=(0,l.w)({server:{GROQ_API_KEY:n.Ay.string()},client:{NEXT_PUBLIC_API_URL:n.Ay.string(),NEXT_PUBLIC_LOCAL_MODE_ENABLED:n.Ay.boolean().default(!0),NEXT_PUBLIC_PRO_MODE_ENABLED:n.Ay.boolean().default(!0)},runtimeEnv:{NEXT_PUBLIC_API_URL:"localhost:3000",NEXT_PUBLIC_LOCAL_MODE_ENABLED:false,NEXT_PUBLIC_PRO_MODE_ENABLED:false,GROQ_API_KEY:a.env.GROQ_API_KEY}})}}]);