"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4302],{32483:(e,t,a)=>{a.d(t,{L0:()=>o,Zr:()=>c,LZ:()=>u});let r={src:"/_next/static/media/ronb.1717817f.png",height:500,width:500,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAP1BMVEVMaXHKLCzNLzDKKy3MKy7KKyyLIjPHKy3CJi7HLS7NMjOTIC7LKy6UIC7WKCiBIzaDHS/IJDbSLS3KLS7hLzJIjpvIAAAAFXRSTlMASLhQa3oznQZdi5aCeQxBnQ4Rsf6amCHrAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAPklEQVR4nBXExw3AMAwAsXNRc0uB9p81CB+EJ0Saw1nlvCHQG8f/1733nNaRS1U1OlFt2KgFr5mZBniYFfgAQ+cB3iYCUj0AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},s={src:"/_next/static/media/kantipur.2b281869.png",height:2028,width:3988,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAAMFBMVEVMaXEXbbUAf/8FZbINabMAY688h8M+hMMAYq85hcImebxVl8YQa7Qdc7lhnc1LkchdP77vAAAAEHRSTlMAKwLDtz+vSY7ezhvtX7qDMCwCsgAAAAlwSFlzAAALEwAACxMBAJqcGAAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAmSURBVHicBcGHAQAgDMMwp4sN/3+LBHAagJF7CAOFz1qQ3aPu0wcH/gCPl+i5GQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:4},l={src:"/_next/static/media/himalayan.c8f6752c.jpg",height:329,width:330,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/2wBDAQoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAUAQEAAAAAAAAAAAAAAAAAAAAE/9oADAMBAAIQAxAAAACvCj//xAAeEAAABAcAAAAAAAAAAAAAAAACAwQSAAEREyRCUf/aAAgBAQABPwA1QuCEeUhsNnuU6nI//8QAGREAAQUAAAAAAAAAAAAAAAAAAQAREkFx/9oACAECAQE/AHlQGL//xAAVEQEBAAAAAAAAAAAAAAAAAAARAP/aAAgBAwEBPwAL/9k=",blurWidth:8,blurHeight:8},n={src:"/_next/static/media/setopati.1c7da194.jpg",height:200,width:200,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/2wBDAQoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAVAQEBAAAAAAAAAAAAAAAAAAACBP/aAAwDAQACEAMQAAAAvQpv/8QAHxAAAQMDBQAAAAAAAAAAAAAAAQIDEQATFAQSIkFh/9oACAEBAAE/AFp1GW0oFjGtGQDym337ur//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAECAQE/AH//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPwCP/9k=",blurWidth:8,blurHeight:8},i={src:"/_next/static/media/onlinekhabar.d6a3cdee.png",height:1638,width:1638,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAOVBMVEX///8qdrDyoKKwyt+gt9LuR0lCeK71+Pv99fX53+A8ABqsb3/xcXKDrMfd5/D4xshRhLSLVGs4eLBp8eAQAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAYXRFWHRSYXcACmlwdGMKICAgICAgMzgKMzg0MjQ5NGQwNDA0MDAwMDAwMDAwMDE5MWMwMjY3MDAxNDU5MzM0YzUzNTg2NDU2NWE0ZjZlMzUzNzMyNGY0ZTUxNGE0MzQ2CjUxMDAKPppi0wAAADRJREFUeJxjYEAAdnYGDg4QLcDIzcrJwMDAwsbLxQOS4WNjFGQFSzGz8DOBpNjZ2cFqYQAAI38A/cjbidwAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},d={src:"/_next/static/media/ratopati.236db22c.jpg",height:180,width:180,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/2wBDAQoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAVAQEBAAAAAAAAAAAAAAAAAAAFB//aAAwDAQACEAMQAAAAmgPSv//EABsQAAIBBQAAAAAAAAAAAAAAAAESEQACBRNR/9oACAEBAAE/ALDjUDbm5Ig1/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERYf/aAAgBAgEBPwC4j//EABkRAAEFAAAAAAAAAAAAAAAAAAABAgNikv/aAAgBAwEBPwBY7v0f/9k=",blurWidth:8,blurHeight:8};function o(e){let t;if("routineofnepalbanda"===e)t=r;else if("ekantipur_official"===e)t=s;else if("the_himalayantimes"===e)t=l;else if("setopati"===e)t=n;else if("onlinekhabarofficial"===e)t=i;else{if("ratopati"!==e)return;t=d}return t}function c(e){return"string"!=typeof e||0===e.length?e:e.charAt(0).toUpperCase()+e.slice(1)}let u=[{icon:{src:"/_next/static/media/for-you.48cfc598.svg",height:24,width:24,blurWidth:0,blurHeight:0},title:"For You",id:"for_you"},{icon:r,title:"RONB",id:"routineofnepalbanda"},{icon:s,title:"E-Kantipur",id:"ekantipur_official"},{icon:l,title:"Himalayan Times",id:"the_himalayantimes"},{icon:n,title:"Setopati",id:"setopati"},{icon:i,title:"Online Khabar",id:"onlinekhabarofficial"},{icon:d,title:"Ratopati",id:"ratopati"}]},8461:(e,t,a)=>{a.d(t,{r:()=>C});var r=a(74494),s=a(79790),l=a(41823),n=a(91800),i=a(77030),d=a(7253),o=a(1011),c=a(92733),u=a(80742),A=a(99415),x=a(3742),h=a(77113);let m=e=>{let{messages:t,status:a}=e,[l,n]=(0,s.useState)(null),i=(e,t)=>{navigator.clipboard.writeText(e).then(()=>{n(t),setTimeout(()=>n(null),2e3)})},m=e=>{let t;let a=[],r=/```([\s\S]*?)```/g,s=0;for(;null!==(t=r.exec(e));){var l;t.index>s&&a.push({type:"text",content:e.slice(s,t.index)});let n=t[1].trim(),i=(null===(l=n.split("\n")[0].match(/^\w+/))||void 0===l?void 0:l[0])||"text";a.push({type:"code",content:n.replace(/^\w+\n/,""),language:i}),s=r.lastIndex}s<e.length&&a.push({type:"text",content:e.slice(s)});let n=[];return a.forEach(e=>{if("code"===e.type)n.push(e);else{let t=e.content.split(/\n\n+/).filter(e=>e.trim());t.forEach((e,a)=>{let r=e.split("\n").filter(e=>e.trim()),s=[];r.forEach(e=>{let t=e.match(/^\*\*(.+?):\*\*/);if(t)s.push({type:"heading",content:t[1]});else{let t=e.match(/^(\d+)\.\s+\*\*(.+?)\*\*:\s*(.*)$/);if(t)s.push({type:"list",number:parseInt(t[1]),title:t[2],description:t[3]});else{let t;let a=/\*\*(.*?)\*\*/g,r=0;for(;null!==(t=a.exec(e));)t.index>r&&s.push({type:"text",content:e.slice(r,t.index)}),s.push({type:"bold",content:t[1]}),r=a.lastIndex;r<e.length&&s.push({type:"text",content:e.slice(r)})}}}),n.push(...s),a<t.length-1&&n.push({type:"separator"})})}}),n};return(0,r.jsx)("div",{className:"flex flex-col pb-28",children:t.map((e,t)=>e.role===o.e4.USER?(0,r.jsx)(d.w,{message:e},t):(0,r.jsx)(A.w,{title:"Answer",animate:"streaming"===a,streaming:"streaming"===a,children:(0,r.jsx)("div",{className:"flex flex-col rounded-3xl relative space-y-4 bg-transparent border mr-auto px-[1.25rem] !mb-4 !mt-4 py-2.5 w-full",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)("div",{className:"w-[95%]",children:m(e.content).map((e,t)=>(0,r.jsx)("div",{className:"mb-2",children:"text"===e.type?(0,r.jsx)("span",{className:"font-medium text-gray-500 p-1 whitespace-pre-wrap",children:e.content}):"bold"===e.type?(0,r.jsx)("span",{className:"font-bold text-gray-500 p-1",children:e.content}):"heading"===e.type?(0,r.jsx)("h3",{className:"font-bold text-gray-500 text-lg mt-4 mb-2",children:e.content}):"list"===e.type?(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsxs)("span",{className:"font-medium text-gray-500 pr-2",children:[e.number,"."]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-bold text-gray-500",children:e.title}),(0,r.jsxs)("span",{className:"font-medium text-gray-500",children:[": ",e.description]})]})]}):"separator"===e.type?(0,r.jsx)("div",{className:"h-4"}):"code"===e.type?(0,r.jsx)(x.A,{language:e.language,style:h.A,customStyle:{borderRadius:"8px",padding:"1rem",margin:"0.5rem 0"},children:e.content}):null},t))}),(0,r.jsx)("button",{onClick:()=>i(e.content,t),className:"text-gray-500 hover:text-gray-400 focus:outline-none absolute top-2 right-3","aria-label":"Copy message",children:l===t?(0,r.jsx)(c.A,{className:"w-4 h-4 text-green-500"}):(0,r.jsx)(u.A,{className:"w-4 h-4"})})]})})},t))})};var f=a(85726),g=a(55878),p=a(30750),b=a(4202),v=a(25082);let w=e=>{let{input:t,setInput:a,user:s,inputRef:l}=e,i=(0,n.useTranslations)("inputBar");return(0,r.jsxs)("div",{className:"w-full flex dark:bg-gradient-to-r dark:from-[hsl(240,3%,27%)] dark:via-[hsl(0,0%,18%)] dark:to-[hsl(240,3%,27%)] flex-col rounded-xl bg-card border border-neutral-300 dark:border-neutral-400  focus-within:ring-tint px-3 py-2",children:[(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(f.A,{className:"!overflow-auto max-h-[150px] w-full bg-transparent text-md resize-none focus:outline-none p-0 placeholder-gray-500",placeholder:i("placeholder"),minRows:2,onChange:e=>a(e.target.value),value:t,ref:l})}),(0,r.jsx)("div",{className:"flex items-center justify-end mt-2 gap-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between w-full ",children:[(0,r.jsx)(b.A,{id:"input_bar",user:s}),(0,r.jsx)(g.$,{type:"submit",variant:"default",size:"icon",className:"rounded-full bg-blue-400 h-9 w-9 flex items-center justify-center disabled:opacity-20 hover:bg-blue-400/80 focus:bg-blue-500 focus:ring-2 focus:ring-blue-500",disabled:0===t.trim().length,children:(0,r.jsx)(p.A,{size:20})})]})})]})},j=e=>{let{input:t,setInput:a,user:s,inputRef:l}=e,i=(0,n.useTranslations)("followUpInput");return(0,r.jsxs)("div",{className:"w-full flex flex-col rounded-xl focus:outline-none px-2 py-1 bg-card border-2 items-center ",children:[(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(f.A,{ref:l,className:"!overflow-auto max-h-[150px] w-full bg-transparent text-md resize-none focus:outline-0 p-2",placeholder:i("placeholder"),onChange:e=>a(e.target.value),value:t})}),(0,r.jsxs)("div",{className:" w-full p-2 flex items-center justify-between gap-2",children:[(0,r.jsx)(b.A,{id:"follow_up_input",user:s}),(0,r.jsx)(g.$,{type:"submit",variant:"default",size:"icon",className:"rounded-full bg-blue-400 aspect-square h-8 w-8 disabled:opacity-20 hover:bg-blue-400/80 overflow-hidden",disabled:0===t.trim().length,children:(0,r.jsx)(p.A,{size:20})})]})]})},y=e=>{let{handleSubmit:t,input:a,setInput:l,status:n,isFollowingUp:i=!1}=e,[d,o]=(0,s.useState)(null),c=(0,s.useRef)(null);return(0,s.useEffect)(()=>{(async()=>{let e=(0,v.U)(),{data:{user:t}}=await e.auth.getUser();o(t)})()},[]),(0,s.useEffect)(()=>{let e=e=>{if(e.ctrlKey&&"q"===e.key){var t;e.preventDefault(),null===(t=c.current)||void 0===t||t.focus()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,r.jsx)("form",{onSubmit:e=>{e.preventDefault(),t(e),l("")},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),0!==a.trim().length&&(t(e),l("")))},className:"w-full shadow-md rounded-xl ",children:i?(0,r.jsx)(j,{input:a,setInput:l,user:d,inputRef:c}):(0,r.jsx)(w,{input:a,setInput:l,inputRef:c,user:d})})};var N=a(56545);let k=(e,t)=>{let{messages:a}=(0,l.Y_)();(0,s.useLayoutEffect)(()=>{let a=()=>{e.current&&t(e.current.scrollWidth)};return a(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[a,e,t])},E=e=>{(0,s.useEffect)(()=>{var t;null===(t=e.current)||void 0===t||t.focus()},[e])},C=()=>{let e=(0,n.useTranslations)("chatPanel"),t=(0,n.useTranslations)("footer"),{promptMode:a}=(0,N.JH)(),{messages:d,input:o,handleSubmit:c,status:u,setInput:A}=(0,l.Y_)({api:"/api/chat"}),{setGrokMessages:x}=(0,N.Qv)();(0,s.useEffect)(()=>{x(d)},[d,x]);let h=e=>{c(e,{body:{mode:a}})},[f,g]=(0,s.useState)(0),p=(0,s.useRef)(null),b=(0,s.useRef)(null),v=(0,s.useRef)(null);return!function(e,t){let a=()=>{e&&e.scrollIntoView({behavior:"smooth"})};(0,s.useEffect)(()=>{a()},[t])}(v.current,d),k(p,g),E(b),(0,r.jsx)(r.Fragment,{children:d.length>0?(0,r.jsxs)("div",{ref:p,className:"mt-[72px] w-full relative",children:[(0,r.jsx)(m,{status:u,messages:d}),(0,r.jsx)("div",{ref:v}),(0,r.jsx)("div",{className:" w-full h-[123px] bg-[#ffffff] dark:bg-[hsl(240,10%,4%)] !border-none bottom-0 fixed flex items-end mr-4  shadow-none",children:(0,r.jsx)("div",{className:" max-w-screen-md  flex justify-center items-center mb-8 mt-4 ",style:{width:"".concat(f||704,"px")},children:(0,r.jsx)(y,{input:o,setInput:A,handleSubmit:h,status:!0,isFollowingUp:!0})})})]}):(0,r.jsxs)("div",{className:"w-full flex flex-col justify-center items-center mb-[5rem]",children:[(0,r.jsx)("span",{className:"pb-1 bottom-0  absolute w-full text-[12px] font bold  text-center text-gray-800 dark:text-gray-50",children:t("title")}),(0,r.jsx)("div",{className:"flex items-center justify-center mb-8",children:(0,r.jsx)("span",{className:"md:text-[40px] text-3xl ",children:e("mainTitle")})}),(0,r.jsx)(y,{input:o,setInput:A,handleSubmit:h,status:!0}),(0,r.jsx)("div",{className:"w-full h-[7.5rem] flex flex-row  justify-between space-y-2 relative",children:(0,r.jsx)(i.A,{})})]})})}},26690:(e,t,a)=>{a.d(t,{X:()=>et});var r=a(74494),s=a(92660),l=a(1011),n=a(16024),i=a(79790),d=a(56545),o=a(65256);let c=o._.NEXT_PUBLIC_API_URL,u=async e=>{let{request:t,onMessage:a}=e;return await (0,n.y)("".concat(c,"/chat"),{method:"POST",headers:{"Content-Type":"application/json"},keepalive:!0,openWhenHidden:!0,body:JSON.stringify({...t}),onmessage:a,onerror:e=>{}})},A=(e,t)=>({query:e,history:t.map(e=>({role:e.role===l.e4.USER?l.e4.USER:l.e4.ASSISTANT,content:e.content}))}),x=()=>{let{addMessage:e,messages:t,threadId:a,setThreadId:r}=(0,d.Lo)(),{model:n,promptMode:o}=(0,d.JH)(),[c,x]=(0,i.useState)(null),[h,m]=(0,i.useState)({Web:!1,Research:!1,Writing:!1,Grammar:!1,Translation:!1,Coding:!1}),[f,g]=(0,i.useState)(!1),p=[],b=(t,a)=>{var s,n,i,d;switch(t.event){case l.Ti.BEGIN_STREAM:g(!0),x({...a,role:l.e4.ASSISTANT,content:"",related_queries:[],sources:[],images:[]});break;case l.Ti.SEARCH_RESULTS:let c=t.data;a.sources=null!==(s=c.results)&&void 0!==s?s:[],a.images=null!==(n=c.images)&&void 0!==n?n:[];break;case l.Ti.TEXT_CHUNK:if(a.content+=t.data.text,!a.agent_response)break;p=p.map(e=>({...e,status:l.c8.DONE})),a.agent_response={steps_details:p};break;case l.Ti.RELATED_QUERIES:a.related_queries=null!==(i=t.data.related_queries)&&void 0!==i?i:[];break;case l.Ti.STREAM_END:let u=t.data;e({...a}),x(null),g(!1),m({...h,[o]:!0}),u.thread_id&&(r(u.thread_id),window.history.pushState({},"","/search/".concat(u.thread_id)));return;case l.Ti.AGENT_QUERY_PLAN:let{steps:A}=t.data;(p=null!==(d=null==A?void 0:A.map((e,t)=>({step:e,queries:[],results:[],status:l.c8.DEFAULT,step_number:t})))&&void 0!==d?d:[])[0].status=l.c8.CURRENT,a.agent_response={steps_details:p};break;case l.Ti.AGENT_SEARCH_QUERIES:let{queries:f,step_number:b}=t.data;p[b].queries=f,p[b].status=l.c8.CURRENT,0!==b&&(p[b-1].status=l.c8.DONE),a.agent_response={steps_details:p};break;case l.Ti.AGENT_READ_RESULTS:let{results:v,step_number:w}=t.data;p[w].results=v;break;case l.Ti.AGENT_FINISH:break;case l.Ti.ERROR:let j=t.data;e({role:l.e4.ASSISTANT,content:j.detail,related_queries:[],sources:[],images:[],agent_response:a.agent_response,is_error_message:!0}),x(null),g(!1),m({...h,[o]:!0});return}x({role:l.e4.ASSISTANT,content:a.content,related_queries:a.related_queries,sources:a.sources,images:a.images,agent_response:null!==a.agent_response?{steps:p.map(e=>e.step),steps_details:p}:null})},{mutateAsync:v}=(0,s.n)({retry:!1,mutationFn:async t=>{let r={role:l.e4.ASSISTANT,content:"",sources:[],related_queries:[],images:[],agent_response:null};e({role:l.e4.USER,content:t.query}),m({...h,[o]:!0});let s={...t,thread_id:a,model:n,pro_search:"Research"===o};await u({request:s,onMessage:e=>{e.data&&b(JSON.parse(e.data),r)}})}});return{handleSend:async e=>{await v(A(e,t))},streamingMessage:c,isStreamingMessage:f,streamingPromptMode:h}};var h=a(9537),m=a(85726),f=a(55878),g=a(30750),p=a(4202),b=a(25082),v=a(91800);let w=e=>{let{input:t,setInput:a,user:s,inputRef:l}=e,n=(0,v.useTranslations)("inputBar");return(0,r.jsxs)("div",{className:"w-full flex dark:bg-gradient-to-r dark:from-[hsl(240,3%,27%)] dark:via-[hsl(0,0%,18%)] dark:to-[hsl(240,3%,27%)] flex-col rounded-xl bg-card border border-neutral-300 dark:border-neutral-400  focus-within:ring-tint px-3 py-2",children:[(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(m.A,{className:"!overflow-auto max-h-[150px]  w-full bg-transparent text-md resize-none  focus:outline-none p-0 placeholder-gray-500",placeholder:n("placeholder"),minRows:2,onChange:e=>a(e.target.value),value:t,ref:l})}),(0,r.jsx)("div",{className:"flex items-center justify-end mt-2 gap-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between w-full ",children:[(0,r.jsx)(p.A,{id:"input_bar",user:s}),(0,r.jsx)(f.$,{type:"submit",variant:"default",size:"icon",className:"rounded-full bg-blue-400 h-9 w-9 flex items-center justify-center disabled:opacity-20 hover:bg-blue-400/80 focus:bg-blue-500 focus:ring-2 focus:ring-blue-500",disabled:0===t.trim().length,children:(0,r.jsx)(g.A,{size:20})})]})})]})},j=e=>{let{input:t,setInput:a,user:s,inputRef:l}=e,n=(0,v.useTranslations)("followUpInput");return(0,r.jsxs)("div",{className:"w-full flex flex-col rounded-xl focus:outline-none px-2 py-1 bg-card border-2 items-center ",children:[(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(m.A,{ref:l,className:"!overflow-auto max-h-[150px]  w-full bg-transparent text-md resize-none focus:outline-0 p-2",placeholder:n("placeholder"),onChange:e=>a(e.target.value),value:t})}),(0,r.jsxs)("div",{className:" w-full p-2 flex items-center justify-between gap-2",children:[(0,r.jsx)(p.A,{id:"follow_up_input",user:s}),(0,r.jsx)(f.$,{type:"submit",variant:"default",size:"icon",className:"rounded-full bg-blue-400 aspect-square h-8 w-8 disabled:opacity-20 hover:bg-blue-400/80 overflow-hidden",disabled:0===t.trim().length,children:(0,r.jsx)(g.A,{size:20})})]})]})},y=e=>{let{sendMessage:t,isFollowingUp:a=!1}=e,[s,l]=(0,i.useState)(""),[n,o]=(0,i.useState)(null),{updateProSearchCount:c}=(0,d.Lo)(),{proMode:u}=(0,d.JH)(),A=(0,i.useRef)(null);function x(){!0===u&&c(1,n.id)}return(0,i.useEffect)(()=>{(async()=>{let e=(0,b.U)(),{data:{user:t}}=await e.auth.getUser();o(t)})()},[]),(0,i.useEffect)(()=>{let e=e=>{if(e.ctrlKey&&"q"===e.key){var t;e.preventDefault(),null===(t=A.current)||void 0===t||t.focus()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,r.jsx)("form",{className:"w-full shadow-md rounded-xl overflow-hidden",onSubmit:e=>{0!==s.trim().length&&(e.preventDefault(),t(s),x(),l(""))},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),0!==s.trim().length&&(t(s),x(),l("")))},children:a?(0,r.jsx)(j,{input:s,setInput:l,user:n,inputRef:A}):(0,r.jsx)(w,{input:s,setInput:l,inputRef:A,user:n})})};var N=a(35621);let k=o._.NEXT_PUBLIC_API_URL,E=async e=>{let t=await fetch("".concat(k,"/thread/").concat(e));return await t.json()},C=e=>{let{data:t,isLoading:a,error:r}=(0,N.I)({queryKey:["thread",e],queryFn:async()=>e?E(e):null});return{data:t,isLoading:a,error:r}};var I=a(67688),R=a(44231),S=a(603),_=a(7253),U=a(92624),T=a(95535),D=a(27679),Q=a(17230),M=a(23345),F=a(16983),B=a(71221);let L=(0,F.F)("grid",{variants:{positions:{left:"[&>li]:grid-cols-[0_min-content_1fr]",right:"[&>li]:grid-cols-[1fr_min-content]",center:"[&>li]:grid-cols-[1fr_min-content_1fr]"}},defaultVariants:{positions:"left"}}),z=i.forwardRef((e,t)=>{let{children:a,className:s,positions:l,...n}=e;return(0,r.jsx)("ul",{className:(0,B.cn)(L({positions:l}),s),ref:t,...n,children:a})});z.displayName="Timeline";let W=(0,F.F)("grid items-start gap-x-2",{variants:{status:{done:"text-primary",default:"text-muted-foreground"}},defaultVariants:{status:"default"}}),P=i.forwardRef((e,t)=>{let{className:a,status:s,...l}=e;return(0,r.jsx)("li",{className:(0,B.cn)(W({status:s}),a),ref:t,...l})});P.displayName="TimelineItem";let K=(0,F.F)("col-start-2 col-end-3 row-start-1 row-end-2 mt-3.5 flex size-3 items-center justify-center rounded-full z-10 bg-background",{variants:{status:{default:"[&>*]:hidden border-tint border-[0.5px]",current:"[&>*:not(.radix-circle)]:hidden [&>.radix-circle]:bg-tint [&>.radix-circle]:fill-tint [&>.radix-circle]:size-3",done:"bg-tint [&>*:not(.radix-check)]:hidden [&>.radix-check]:text-background [&>.radix-check]:size-2",error:"border-destructive bg-destructive [&>*:not(.radix-cross)]:hidden [&>.radix-cross]:text-background [&>.radix-cross]:size-2",custom:"[&>*:not(:nth-child(4))]:hidden [&>*:nth-child(4)]:block [&>*:nth-child(4)]:size-2"}},defaultVariants:{status:"default"}}),G=i.forwardRef((e,t)=>{let{className:a,status:s,customIcon:l,...n}=e;return(0,r.jsxs)("div",{role:"status",className:(0,B.cn)("timeline-dot",K({status:s}),a),ref:t,...n,children:[(0,r.jsx)("div",{className:"radix-circle size-2 rounded-full"}),(0,r.jsx)(M.Srz,{className:"radix-check size-2"}),(0,r.jsx)(M.raE,{className:"radix-cross size-2"}),l]})});G.displayName="TimelineDot";let Y=(0,F.F)("row-start-1 row-end-2 text-muted-foreground",{variants:{side:{right:"col-start-3 col-end-4 mr-auto text-left",left:"col-start-1 col-end-2 ml-auto text-right"}},defaultVariants:{side:"right"}}),H=i.forwardRef((e,t)=>{let{className:a,side:s,...l}=e;return(0,r.jsx)("div",{className:(0,B.cn)(Y({side:s}),a),ref:t,...l})});H.displayName="TimelineContent";let q=(0,F.F)("row-start-2 row-end-3 line-clamp-1 max-w-full truncate",{variants:{side:{right:"col-start-3 col-end-4 mr-auto text-left",left:"col-start-1 col-end-2 ml-auto text-right"},variant:{primary:"text-base font-medium text-primary",secondary:"text-sm font-light text-muted-foreground"}},defaultVariants:{side:"right",variant:"primary"}});i.forwardRef((e,t)=>{let{className:a,side:s,variant:l,...n}=e;return(0,r.jsx)("p",{role:"heading","aria-level":"primary"===l?2:3,className:(0,B.cn)(q({side:s,variant:l}),a),ref:t,...n})}).displayName="TimelineHeading";let X=i.forwardRef((e,t)=>{let{className:a,done:s=!1,...l}=e;return(0,r.jsx)("hr",{role:"separator","aria-orientation":"vertical",className:(0,B.cn)("col-start-2 col-end-3 row-start-1 row-end-3 mx-auto flex h-full w-[3px] justify-center rounded-full","mt-6 mb-2","bg-muted",a),ref:t,...l})});X.displayName="TimelineLine",a(39771);let V=e=>{let{step:t,queries:a,results:s}=e,l=(0,v.useTranslations)("proRender");return(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("div",{className:(0,B.cn)("flex flex-col gap-1 text-xs transition-all duration-300 ease-in-out",a.length>0?"opacity-100 max-h-[500px]":"opacity-0 max-h-0 overflow-hidden"),children:[(0,r.jsx)("div",{className:"text-muted-foreground font-medium",children:l("search")}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:a.map((e,t)=>(0,r.jsxs)("div",{className:"bg-card rounded-full text-muted-foreground px-2 py-1 mr-2 mb-2 font-medium flex items-center",children:[(0,r.jsx)(T.A,{className:"h-3 w-3 mr-1"}),e]},"query-".concat(t)))})]}),(0,r.jsxs)("div",{className:(0,B.cn)("flex flex-col gap-1 text-xs transition-all duration-300 ease-in-out",s.length>0?"opacity-100 max-h-[500px]":"opacity-0 max-h-0 overflow-hidden"),children:[(0,r.jsx)("div",{className:"text-muted-foreground font-medium",children:l("results")}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:s.map((e,t)=>{let a=new URL(e.url).hostname.split(".").slice(-2,-1)[0];return(0,r.jsxs)("a",{className:"bg-card rounded-full text-muted-foreground pl-2 pr-2 py-1 mr-2 mb-2 font-medium flex items-center space-x-1 hover:bg-card/80",href:e.url,target:"_blank",children:[(0,r.jsx)(Q.gu,{url:e.url}),(0,r.jsx)("div",{className:"",children:a})]},"result-".concat(t))})})]})]})},O=e=>{var t;let{streamingProResponse:a,streamingPromptMode:s=!1}=e,[n,d]=(0,i.useState)([]),o=(0,v.useTranslations)("proRender");if((0,i.useEffect)(()=>{if(!(null==a?void 0:a.steps_details))return;let e=a.steps_details;e&&d(e.map((e,t)=>({index:t,status:e.status})).filter(e=>e.status===l.c8.CURRENT).map(e=>e.index.toString()))},[a]),(null==a?void 0:a.steps_details)||null==a||null===(t=a.steps)||void 0===t||t.length,!(null==a?void 0:a.steps_details))return null;let{steps_details:c}=a;return(0,r.jsxs)("div",{className:"w-full border rounded-lg p-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)(D.A,{className:"h-5 w-5 mr-2"}),(0,r.jsx)("h1",{className:"text-lg font-medium ",children:o("title")})]}),(0,r.jsx)(S.w,{}),(0,r.jsx)(z,{className:"w-full",children:c.map((e,t)=>{let{step:a,queries:s,results:i,status:o}=e,u=t===c.length-1;return(0,r.jsxs)(P,{status:"default",children:[(0,r.jsx)(G,{status:o}),!u&&(0,r.jsx)(X,{done:!0}),(0,r.jsx)(H,{className:"w-full",children:(0,r.jsx)(U.nD,{type:"multiple",className:"w-full",value:n,onValueChange:d,children:(0,r.jsxs)(U.As,{value:t.toString(),className:(0,B.cn)(u?"border-b-0":""),disabled:o!==l.c8.DONE||u,children:[(0,r.jsx)(U.$m,{className:"w-full text-left hover:no-underline hover:bg-card/80 rounded-md px-2 py-2 my-1 text-primary",children:a}),(0,r.jsx)(U.ub,{className:"w-full px-3 py-1",children:(0,r.jsx)(V,{step:a,queries:s||[],results:i||[]})})]})})})]},t)})})]})},Z=(0,i.memo)(e=>{let{messages:t,streamingMessage:a,isStreamingMessage:s,streamingPromptMode:n,onRelatedQuestionSelect:i}=e,d=null==a?void 0:a.agent_response;return(0,r.jsxs)("div",{className:"flex flex-col pb-28",children:[t.map((e,a)=>e.role===l.e4.USER?(0,r.jsx)(_.w,{message:e},a):(0,r.jsxs)(r.Fragment,{children:[e.agent_response&&(0,r.jsx)(O,{streamingProResponse:e.agent_response}),(0,r.jsx)(R.F,{message:e,onRelatedQuestionSelect:i},a),a!==t.length-1&&(0,r.jsx)(S.w,{})]})),n.Research&&(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(O,{streamingProResponse:null!=d?d:null,streamingPromptMode:n.Research})}),a&&s&&(0,r.jsx)(R.F,{message:a,isStreaming:!0,onRelatedQuestionSelect:i})]})});var J=a(77030);let $=(e,t)=>{let{messages:a}=(0,d.Lo)();(0,i.useEffect)(()=>{let a=()=>{e.current&&t(e.current.scrollWidth)};return a(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[a,e,t])},ee=e=>{(0,i.useEffect)(()=>{var t;null===(t=e.current)||void 0===t||t.focus()},[e])},et=e=>{let{threadId:t}=e,a=(0,v.useTranslations)("chatPanel"),s=(0,v.useTranslations)("footer"),l=(0,h.useSearchParams)().get("q"),n=(0,i.useRef)(!1),{handleSend:o,streamingMessage:c,isStreamingMessage:u,streamingPromptMode:A}=x(),{messages:m,setMessages:f,setThreadId:g}=(0,d.Lo)(),{data:p,isLoading:b,error:w}=C(t),[j,N]=(0,i.useState)(0),k=(0,i.useRef)(null),E=(0,i.useRef)(null);return $(k,N),ee(E),(0,i.useEffect)(()=>{l&&!n.current&&(g(null),n.current=!0,o(l))},[l]),(0,i.useEffect)(()=>{p&&(g(p.thread_id),f(p.messages||[]))},[t,p,f,g]),(0,i.useEffect)(()=>{0==m.length&&g(null)},[m,g]),(0,r.jsx)(r.Fragment,{children:m.length>0||t?b?(0,r.jsx)("div",{className:"w-full flex justify-center items-center",children:(0,r.jsx)(I.A,{className:"animate-spin w-8 h-8"})}):(0,r.jsxs)("div",{ref:k,className:"mt-[72px] w-full relative",children:[(0,r.jsx)(Z,{messages:m,streamingMessage:c,isStreamingMessage:u,streamingPromptMode:A,onRelatedQuestionSelect:o}),(0,r.jsx)("div",{className:" w-full h-[123px] z-[100]  bg-[#ffffff] dark:bg-[hsl(240,10%,4%)] bottom-0 fixed flex items-end mr-4 ",children:(0,r.jsx)("div",{className:" max-w-screen-md  flex justify-center items-center mb-8 mt-4 ",style:{width:"".concat(j,"px")},children:(0,r.jsx)(y,{isFollowingUp:!0,sendMessage:o})})})]}):(0,r.jsxs)("div",{className:"w-full  flex flex-col justify-center items-center mb-[5rem]",children:[(0,r.jsx)("span",{className:"pb-1 bottom-0  absolute w-full text-[12px] font bold  text-center text-gray-800 dark:text-gray-50",children:s("title")}),(0,r.jsx)("div",{className:"flex items-center justify-center mb-8",children:(0,r.jsx)("span",{className:"md:text-[40px] text-3xl ",children:a("mainTitle")})}),(0,r.jsx)(y,{sendMessage:o}),(0,r.jsx)("div",{className:"w-full h-[7.5rem] flex flex-row  justify-between space-y-2 relative",children:(0,r.jsx)(J.A,{})})]})})}},7253:(e,t,a)=>{a.d(t,{w:()=>s});var r=a(74494);let s=e=>{let{message:t}=e;return(0,r.jsx)("div",{className:"mt-8 mb-8",children:(0,r.jsx)("span",{className:"text-base",children:t.content})})}},4202:(e,t,a)=>{a.d(t,{A:()=>b});var r=a(74494),s=a(71221),l=a(56545),n=a(79790),i=a(25082),d=a(27375),o=a(91800),c=a(39274),u=a(1011),A=a(38352),x=a(12965),h=a(27679),m=a(63918),f=a(35154);let g={[u.Ix.Web]:{name:"Web",description:null,value:u.Ix.Web,smallIcon:(0,r.jsx)(A.A,{className:"w-4 h-4  text-green-600 hover:text-green-400"}),icon:(0,r.jsx)(A.A,{className:"w-5 h-5 text-green-600  "})},[u.Ix.Research]:{name:"Research",description:null,value:u.Ix.Research,smallIcon:(0,r.jsx)(x.A,{className:"w-4 h-4 text-blue-600  hover:text-blue-400"}),icon:(0,r.jsx)(x.A,{className:"w-5 h-5 text-blue-600   "})},[u.Ix.Writing]:{name:"Writing",description:null,value:u.Ix.Writing,smallIcon:(0,r.jsx)(h.A,{className:"w-4 h-4 text-purple-600 hover:text-purple-400 "}),icon:(0,r.jsx)(h.A,{className:"w-5 h-5 text-purple-600 "})},[u.Ix.Grammar]:{name:"Grammar",description:null,value:u.Ix.Grammar,smallIcon:(0,r.jsx)(m.A,{className:"w-4 h-4 text-yellow-600 hover:text-yellow-600  "}),icon:(0,r.jsx)(m.A,{className:"w-5 h-5 text-yellow-600 "})},[u.Ix.Translation]:{name:"Translation",description:null,value:u.Ix.Translation,smallIcon:(0,r.jsx)(f.A,{className:"w-4 h-4 text-pink-600  hover:text-pink-600 "}),icon:(0,r.jsx)(f.A,{className:"w-5 h-5 text-pink-600 "})}},p=e=>{let t,{model:a,disabled:l}=e;return"Web"===a.name&&(t="text-green-600"),"Grammar"===a.name&&(t="text-yellow-600"),"Research"===a.name&&(t="text-blue-600"),"Writing"===a.name&&(t="text-purple-600"),"Translation"===a.name&&(t="text-pink-600"),(0,r.jsx)(c.eb,{value:a.value,className:(0,s.cn)("flex flex-col items-start px-2 py-3 rounded-lg ",l&&"cursor-not-allowed opacity-50"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-3 text-gray-600",children:[a.icon,(0,r.jsxs)("div",{className:"flex flex-col text-base ",children:[(0,r.jsx)("span",{className:(0,s.cn)(t),children:a.name}),(0,r.jsx)("span",{children:a.description})]})]})},a.value)};function b(e){var t;let a,{user:A,id:x}=e,[h,m]=(0,n.useState)(null),{proSearchCount:f,fetchProSearchCount:b}=(0,l.Lo)();(0,o.useTranslations)("proToggle");let{promptMode:v,setPromptMode:w}=(0,l.JH)(),j=null!==(t=g[v])&&void 0!==t?t:g[u.Ix.Web];return"Web"===j.name&&(a="text-green-600 hover:text-green-400 bg-green-100 hover:border-green-400 dark:hover:border-green-300 dark:bg-neutral-600 dark:hover:text-green-400 "),"Grammar"===j.name&&(a="text-yellow-600 hover:text-yellow-400 bg-yellow-100 hover:border-yellow-400 dark:hover:border-yellow-300 dark:bg-neutral-600 dark:hover:text-yellow-400"),"Research"===j.name&&(a="text-blue-600 hover:text-blue-400 bg-blue-100 hover:border-blue-400 dark:hover:border-blue-300 dark:bg-neutral-600 dark:hover:text-blue-400"),"Writing"===j.name&&(a="text-purple-600 hover:text-purple-400 bg-purple-100 hover:border-purple-400 dark:hover:border-purple-300 dark:bg-neutral-600 dark:hover:text-purple-400"),"Translation"===j.name&&(a="text-pink-600 hover:text-pink-400 bg-pink-100 hover:border-pink-400 dark:hover:border-pink-300 dark:bg-neutral-600 dark:hover:text-pink-400"),(0,n.useEffect)(()=>{(async()=>{let e=(0,i.U)(),[t]=await Promise.all([(0,d.uV)(e)]);m(t)})()},[]),(0,n.useEffect)(()=>{b(null==A?void 0:A.id)},[b,null==A?void 0:A.id]),(0,r.jsxs)(c.l6,{defaultValue:v,value:v,onValueChange:e=>{e&&w(e)},children:[(0,r.jsx)(c.bq,{className:(0,s.cn)(a,"w-fit  space-x-2     border-gray-300  dark:border-gray-400    select-none rounded-full  focus:!ring-0 focus:!ring-offset-transparent focus:!outline-0 shadow-none transition-all duration-500 ease-in-out  text-[14px]"),children:(0,r.jsx)(c.yv,{children:(0,r.jsxs)("div",{className:"flex items-center  space-x-1  ",children:[(0,r.jsx)("div",{children:j.smallIcon}),(0,r.jsx)("span",{className:"medium",children:j.name})]})})}),(0,r.jsx)(c.gC,{align:"start",side:"bottom",className:"w-[225px] border border-transparent  rounded-xl shadow-2xl ",children:(0,r.jsx)(c.s3,{className:"w-full border border-transparent rounded-lg px-1",children:Object.values(g).map((e,t)=>(0,r.jsx)(p,{model:e,disabled:!A&&0!==t},t))})})]})}},92624:(e,t,a)=>{a.d(t,{$m:()=>c,As:()=>o,nD:()=>d,ub:()=>u});var r=a(74494),s=a(79790),l=a(63299),n=a(33077),i=a(71221);let d=l.bL,o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.q7,{ref:t,className:(0,i.cn)("border-b",a),...s})});o.displayName="AccordionItem";let c=s.forwardRef((e,t)=>{let{className:a,children:s,...d}=e;return(0,r.jsx)(l.Y9,{className:"flex",children:(0,r.jsxs)(l.l9,{ref:t,className:(0,i.cn)("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",a),...d,children:[s,(0,r.jsx)(n.A,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})})});c.displayName=l.l9.displayName;let u=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsx)(l.UC,{ref:t,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:(0,r.jsx)("div",{className:(0,i.cn)("pb-4 pt-0",a),children:s})})});u.displayName=l.UC.displayName},77030:(e,t,a)=>{a.d(t,{A:()=>G});var r=a(74494),s=a(79790),l=a(64684),n=a(55878),i=a(80129),d=a(16957),o=a(24641);function c(e){let{onRemove:t}=e,[a,c]=(0,s.useState)({year:"",month:"",day:"",week:""}),[u,A]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=async()=>{let t=new d.A(new Date),a=u?t.format("YYYY"):t.format("YYYY","np"),r=u?t.format("MMMM"):t.format("MMMM","np"),s=u?t.format("DD"):t.format("DD","np"),l=u?t.format("ddd"):t.format("ddd","np");c({...e,year:a,month:r,day:s,week:"".concat(l,",")})};e()},[u]),(0,r.jsx)(l.Zp,{className:"shadow-none relative h-full flex  dark:bg-[hsl(240,3%,27%)]   bg-[#eeeee4] border dark:border-neutral-400 dark:hover:border-neutral-100 border-neutral-400 hover:border-neutral-300 text-gray-800 overflow-hidden",children:(0,r.jsxs)(l.Wu,{className:"flex flex-col items-start w-[95%] text-start h-full p-2 gap-2",children:[(0,r.jsxs)("div",{className:"flex justify-start gap-2 items-center mt-2  text-[hsl(222,8%,48%)] dark:text-gray-400",children:[(0,r.jsxs)("span",{className:"font-bold text-4xl",children:[" ",a.day]}),(0,r.jsxs)("div",{className:"w-[60%] flex flex-wrap gap-[2px]",children:[(0,r.jsxs)("span",{className:" text-lg",children:[" ",a.week]}),(0,r.jsxs)("span",{className:" text-lg",children:[a.month," "]}),(0,r.jsx)("span",{className:"text-lg ",children:a.year})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4 ",children:[(0,r.jsx)(o.l,{pressed:u,onPressedChange:()=>{A(!u)},"aria-label":"Toggle temperature unit",className:"text-gray-600 dark:text-gray-400  absolute bottom-1 right-1 flex !justify-center !bg-[#bfc1c738] !h-6 !items-center rounded-lg min-w-6  !p-1",children:u?"np":"en"}),(0,r.jsx)("div",{className:"absolute right-0 top-0",children:(0,r.jsx)(n.$,{variant:"ghost",size:"icon",onClick:t,className:"text-gray-600 dark:text-gray-400 h-2 w-2 p-3 rounded-full hover:text-gray-800 hover:bg-gray-400 dark:hover:bg-neutral-800 dark:hover:text-gray-400",children:(0,r.jsx)(i.A,{className:"h-2 w-2"})})})]})]})})}var u=a(1287),A=a(36514),x=a(55347),h=a(76230),m=a(82388),f=a(55807),g=a(6839),p=a(99503),b=a(58252),v=a(29269),w=a(16983),j=a(71221);let y=(0,w.F)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),N=s.forwardRef((e,t)=>{let{className:a,variant:s,size:l,...n}=e;return(0,r.jsx)(o.b,{ref:t,className:(0,j.cn)(y({variant:s,size:l,className:a})),...n})});N.displayName=o.b.displayName;var k=a(35621),E=a(5183);let C={Clear:{day:(0,r.jsx)(u.A,{strokeWidth:1.35}),night:(0,r.jsx)(A.A,{strokeWidth:1.35})},Clouds:{day:(0,r.jsx)(x.A,{strokeWidth:1.35}),night:(0,r.jsx)(h.A,{strokeWidth:1.35})},Rain:{day:(0,r.jsx)(m.A,{strokeWidth:1.35}),night:(0,r.jsx)(f.A,{strokeWidth:1.35})},Drizzle:{day:(0,r.jsx)(g.A,{strokeWidth:1.35}),night:(0,r.jsx)(g.A,{strokeWidth:1.35})},Thunderstorm:{day:(0,r.jsx)(p.A,{strokeWidth:1.35}),night:(0,r.jsx)(p.A,{strokeWidth:1.35})},Snow:{day:(0,r.jsx)(b.A,{strokeWidth:1.35}),night:(0,r.jsx)(b.A,{strokeWidth:1.35})},Fog:{day:(0,r.jsx)(v.A,{strokeWidth:1.35}),night:(0,r.jsx)(v.A,{strokeWidth:1.35})}};function I(e){let t,a,d,{onRemove:o}=e,[c,u]=(0,s.useState)(null),[A,x]=(0,s.useState)(!1),h=(0,s.useCallback)(async()=>{try{let e=await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}),t={lat:e.coords.latitude,lon:e.coords.longitude};u(t),localStorage.setItem("lastLocation",JSON.stringify(t))}catch(t){console.error("Error getting location:",t);let e=localStorage.getItem("lastLocation");e?u(JSON.parse(e)):u({lat:27.7172,lon:85.324})}},[]);(0,s.useEffect)(()=>{h()},[h]);let{data:m,error:f}=(0,k.I)({queryKey:["weather",null==c?void 0:c.lat,null==c?void 0:c.lon],queryFn:async()=>{if(!c)throw Error("No coordinates available");let e=E.env.NEXT_PUBLIC_WEATHER_API_KEY,t=await fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(c.lat,"&lon=").concat(c.lon,"&units=metric&appid=").concat(e));if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return t.json()},enabled:!!c,refetchOnWindowFocus:!1,staleTime:3e5,gcTime:6e5}),g=(null==m?void 0:m.weather[0].main)||"Clouds",p=m?(t=m.sys.sunrise,a=m.sys.sunset,(d=m.dt)>=t&&d<a)?"day":"night":"day",b=C[g]?C[g][p]:C.Clouds.day;return(0,r.jsx)(l.Zp,{className:"shadow-none relative h-full flex dark:bg-[hsl(240,3%,27%)] bg-[#eeeee4] border dark:border-neutral-400 dark:hover:border-neutral-100 border-neutral-400 hover:border-neutral-300 text-gray-800 overflow-hidden",children:(0,r.jsxs)(l.Wu,{className:"flex flex-col items-start text-start h-full p-2 gap-1 w-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"w-full flex text-base gap-2 justify-between items-center text-gray-600 dark:text-gray-400",children:[b,(0,r.jsx)("span",{children:g})]}),(0,r.jsx)(N,{pressed:A,onPressedChange:()=>{x(!A)},"aria-label":"Toggle temperature unit",className:"text-gray-600 dark:text-gray-400 absolute bottom-1 right-1 flex !justify-center !bg-[#bfc1c738] !h-6 !items-center rounded-lg min-w-6 !p-1",children:A?"\xb0C":"\xb0F"}),(0,r.jsx)("div",{className:"absolute right-0 top-0",children:(0,r.jsx)(n.$,{variant:"ghost",size:"icon",onClick:o,className:"text-gray-600 dark:text-gray-400 h-2 w-2 p-3 rounded-full hover:text-gray-800 hover:bg-gray-400 dark:hover:bg-neutral-800 dark:hover:text-gray-400",children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})})]}),(0,r.jsxs)("div",{className:"flex w-[85%] overflow-hidden items-center h-fit gap-2 text-[hsl(222,8%,48%)] dark:text-gray-400",children:[(0,r.jsxs)("div",{className:"flex items-center justify-start",children:[(0,r.jsx)("span",{className:"font-semibold text-4xl",children:m?(0,j.xZ)(m,A):"--"}),(0,r.jsxs)("span",{className:"text-2xl font-regular",children:["\xb0",A?"F":"C"]})]}),(0,r.jsx)("div",{className:"flex flex-col gap-1 justify-start",children:(0,r.jsx)("p",{title:null==m?void 0:m.name,className:"text-base",children:null==m?void 0:m.name})})]})]})})}var R=a(48517),S=a(73585);let _=async()=>{let e=await fetch("https://walrus-app-xoils.ondigitalocean.app/api/RONB/instagram-posts/");if(!e.ok)throw Error((await e.json()).detail||"Failed to fetch latest post");let t=await e.json();if(!Array.isArray(t)||0===t.length)throw Error("No posts available");let a=t[0];return{id:a.id||"default_id",caption:a.caption||"No caption",username:a.username||"Unknown",like_count:a.like_count||0}},U=()=>(0,k.I)({queryKey:["firstPost"],queryFn:_,retry:3,staleTime:3e5,refetchInterval:3e5});var T=a(32483);function D(e){var t;let{onRemove:a}=e,{data:s,isLoading:d,isError:o,error:c}=U();if(d)return(0,r.jsx)(l.Zp,{className:"shadow-none relative h-full flex dark:bg-[hsl(240,3%,27%)] bg-[#eeeee4] border dark:border-neutral-400 dark:hover:border-neutral-100 border-neutral-400 hover:border-neutral-300 text-gray-800 overflow-hidden",children:(0,r.jsxs)(l.Wu,{className:"flex flex-col items-start w-[90%] text-start h-full p-0 pl-2 pt-2",children:[(0,r.jsx)("div",{children:"Fetching news..."}),(0,r.jsx)("div",{className:"absolute right-0 top-0",children:(0,r.jsx)(n.$,{variant:"ghost",size:"icon",onClick:a,className:"text-gray-600 dark:text-gray-400 h-2 w-2 p-3 rounded-full hover:text-gray-800 hover:bg-gray-400 dark:hover:bg-neutral-800 dark:hover:text-gray-400",children:(0,r.jsx)(i.A,{className:"h-1 w-2"})})})]})});if(o)return(0,r.jsx)(l.Zp,{className:"shadow-none relative h-full flex dark:bg-[hsl(240,3%,27%)] bg-[#eeeee4] border dark:border-neutral-400 dark:hover:border-neutral-100 border-neutral-400 hover:border-neutral-300 text-gray-800 overflow-hidden",children:(0,r.jsxs)(l.Wu,{className:"flex flex-col items-start w-[90%] text-start h-full p-0 pl-2 pt-2",children:[(0,r.jsxs)("div",{children:["Error: ",(null==c?void 0:c.message)||"Failed to load news"]}),(0,r.jsx)("div",{className:"absolute right-0 top-0",children:(0,r.jsx)(n.$,{variant:"ghost",size:"icon",onClick:a,className:"text-gray-600 dark:text-gray-400 h-2 w-2 p-3 rounded-full hover:text-gray-800 hover:bg-gray-400 dark:hover:bg-neutral-800 dark:hover:text-gray-400",children:(0,r.jsx)(i.A,{className:"h-1 w-2"})})})]})});if(!s)return(0,r.jsx)(l.Zp,{className:"shadow-none relative h-full flex dark:bg-[hsl(240,3%,27%)] bg-[#eeeee4] border dark:border-neutral-400 dark:hover:border-neutral-100 border-neutral-400 hover:border-neutral-300 text-gray-800 overflow-hidden",children:(0,r.jsxs)(l.Wu,{className:"flex flex-col items-start w-[90%] text-start h-full p-0 pl-2 pt-2",children:[(0,r.jsx)("div",{children:"No news available"}),(0,r.jsx)("div",{className:"absolute right-0 top-0",children:(0,r.jsx)(n.$,{variant:"ghost",size:"icon",onClick:a,className:"text-gray-600 dark:text-gray-400 h-2 w-2 p-3 rounded-full hover:text-gray-800 hover:bg-gray-400 dark:hover:bg-neutral-800 dark:hover:text-gray-400",children:(0,r.jsx)(i.A,{className:"h-1 w-2"})})})]})});let u=(0,j.gL)(s.caption,50);return(0,r.jsx)(l.Zp,{className:"shadow-none relative h-full flex dark:bg-[hsl(240,3%,27%)] bg-[#eeeee4] border dark:border-neutral-400 dark:hover:border-neutral-100 border-neutral-400 hover:border-neutral-300 text-gray-800 overflow-hidden",children:(0,r.jsxs)(l.Wu,{className:"flex flex-col items-start w-[90%] text-start h-full p-0 pl-2 pt-2",children:[(0,r.jsxs)("div",{title:s.caption,className:"font-medium md:!h-auto h-auto md:text-sm text-lg items-start text-[hsl(222,8%,48%)] dark:text-gray-400",children:[(0,r.jsxs)(S.eu,{className:"left-0 inline-block mr-1 align-middle h-[16px] w-[16px]",children:[(0,r.jsx)(S.BK,{src:null===(t=(0,T.L0)(s.username))||void 0===t?void 0:t.src}),(0,r.jsx)(S.q5,{children:"Lg"})]}),u]}),(0,r.jsxs)("span",{className:"flex absolute right-2 bottom-1 ml-auto gap-0.5 justify-start items-center",children:[(0,r.jsx)(R.A,{fill:"#f73056",strokeWidth:0,className:"w-3 h-3 dark:text-gray-400"}),(0,r.jsx)("span",{className:"text-[12px] text-gray-600 dark:text-gray-400",children:s.like_count.toString()})]}),(0,r.jsx)("div",{className:"absolute right-0 top-0",children:(0,r.jsx)(n.$,{variant:"ghost",size:"icon",onClick:a,className:"text-gray-600 dark:text-gray-400 h-2 w-2 p-3 rounded-full hover:text-gray-800 hover:bg-gray-400 dark:hover:bg-neutral-800 dark:hover:text-gray-400",children:(0,r.jsx)(i.A,{className:"h-1 w-2"})})})]})})}var Q=a(56545),M=a(89597);a(81461),a(84693);let F=[{type:"date",label:"Date"},{type:"weather",label:"Weather"},{type:"news",label:"News"}];var B=a(58283),L=a(69371);function z(e){let{activeWidgets:t,sliderSettings:a,renderWidget:s,addWidget:l}=e;return(0,r.jsxs)("div",{className:"mt-6 w-[calc(100%-1rem)]",children:[(0,r.jsxs)(B.rI,{children:[(0,r.jsx)(B.ty,{asChild:!0,children:(0,r.jsx)(n.$,{className:" absolute top-[20%] -right-[0px] !h-2 !w-2 p-2 focus-visible:!ring-0 hover:!bg-neutral-100 dark:bg-neutral-900 dark:hover:!bg-neutral-900 text-neutral-950 dark:text-neutral-50 dark:hover:text-neutral-300 hover:text-neutral-600 bg-neutral-100 rounded-full",children:(0,r.jsx)(L.A,{className:"!w-4 !h-4 text-gray-600"})})}),(0,r.jsx)(B.SQ,{children:F.map(e=>(0,r.jsx)(B._2,{onClick:()=>l(e.type),disabled:t.includes(e.type),children:e.label},e.type))})]}),(0,r.jsx)(M.A,{...a,children:t.map((e,t)=>(0,r.jsx)("div",{className:" mb-2  !flex !justify-center items-center  !w-[100%]",children:(0,r.jsx)("div",{className:"!w-[90%] h-20",children:s(e,t)})},t))})]})}var W=a(68951);function P(e){let{addWidget:t,activeWidgets:a,onDragEnd:s,renderWidget:l}=e;return(0,r.jsxs)("div",{className:"mt-6 w-full",children:[(0,r.jsxs)(B.rI,{children:[(0,r.jsx)(B.ty,{asChild:!0,children:(0,r.jsx)(n.$,{className:"absolute top-[20%] -right-[0px] !h-2 !w-2 p-2 focus-visible:!ring-0 hover:!bg-neutral-100 dark:bg-neutral-900 dark:hover:!bg-neutral-900 text-neutral-950 dark:text-neutral-50 dark:hover:text-neutral-300 hover:text-neutral-600 bg-neutral-100 rounded-full",children:(0,r.jsx)(L.A,{className:"!w-4 !h-4 text-gray-600"})})}),(0,r.jsx)(B.SQ,{children:F.map(e=>(0,r.jsx)(B._2,{onClick:()=>t(e.type),disabled:a.includes(e.type),children:e.label},e.type))})]}),(0,r.jsx)(W.JY,{onDragEnd:s,children:(0,r.jsx)(W.gL,{droppableId:"widgets",direction:"horizontal",children:e=>(0,r.jsxs)("div",{className:"flex flex-wrap justify-center md:justify-start gap-4",...e.droppableProps,ref:e.innerRef,children:[a.map((e,t)=>(0,r.jsx)(W.sx,{draggableId:e,index:t,children:a=>(0,r.jsx)("div",{ref:a.innerRef,...a.draggableProps,...a.dragHandleProps,className:"w-[calc(32%-0.5rem)] h-20 mb-4",children:l(e,t)})},e)),e.placeholder]})})})]})}let K="widgetOrder";function G(){let{activeWidgets:e,setActiveWidgets:t,isWidgetVisible:a}=(0,Q.ZS)(),[l,n]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let a=localStorage.getItem(K);a&&0===e.length?t(JSON.parse(a)):0===e.length&&t(["date","weather","news"])},[t]),(0,s.useEffect)(()=>{e.length>0&&localStorage.setItem(K,JSON.stringify(e))},[e]),(0,s.useEffect)(()=>{let e=()=>{n(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let i=a=>{e.includes(a)||t([...e,a])},d=a=>{t(e.filter(e=>e!==a))},o=(e,t)=>{let a={onRemove:()=>d(e),index:t};switch(e){case"date":return(0,r.jsx)(c,{...a},e);case"weather":return(0,r.jsx)(I,{...a},e);case"news":return(0,r.jsx)(D,{...a},e);default:return null}};if(!a)return null;if(!l)return(0,r.jsx)(P,{renderWidget:o,activeWidgets:e,addWidget:i,onDragEnd:a=>{if(!a.destination)return;let r=Array.from(e),[s]=r.splice(a.source.index,1);r.splice(a.destination.index,0,s),t(r)}});{let t={dots:!0,infinite:e.length>1,speed:500,slidesToShow:1,slidesToScroll:1,autoplay:e.length>1,autoplaySpeed:3e3,arrows:!1};return(0,r.jsx)(z,{renderWidget:o,activeWidgets:e,sliderSettings:t,addWidget:i})}}}}]);