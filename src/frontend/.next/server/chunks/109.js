"use strict";exports.id=109,exports.ids=[109],exports.modules={33733:(e,t,a)=>{a.d(t,{L0:()=>o,Zr:()=>c,LZ:()=>u});let s={src:"/_next/static/media/ronb.1717817f.png",height:500,width:500,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAP1BMVEVMaXHKLCzNLzDKKy3MKy7KKyyLIjPHKy3CJi7HLS7NMjOTIC7LKy6UIC7WKCiBIzaDHS/IJDbSLS3KLS7hLzJIjpvIAAAAFXRSTlMASLhQa3oznQZdi5aCeQxBnQ4Rsf6amCHrAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAPklEQVR4nBXExw3AMAwAsXNRc0uB9p81CB+EJ0Saw1nlvCHQG8f/1733nNaRS1U1OlFt2KgFr5mZBniYFfgAQ+cB3iYCUj0AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},r={src:"/_next/static/media/kantipur.2b281869.png",height:2028,width:3988,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAAMFBMVEVMaXEXbbUAf/8FZbINabMAY688h8M+hMMAYq85hcImebxVl8YQa7Qdc7lhnc1LkchdP77vAAAAEHRSTlMAKwLDtz+vSY7ezhvtX7qDMCwCsgAAAAlwSFlzAAALEwAACxMBAJqcGAAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAmSURBVHicBcGHAQAgDMMwp4sN/3+LBHAagJF7CAOFz1qQ3aPu0wcH/gCPl+i5GQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:4},l={src:"/_next/static/media/himalayan.c8f6752c.jpg",height:329,width:330,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/2wBDAQoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAUAQEAAAAAAAAAAAAAAAAAAAAE/9oADAMBAAIQAxAAAACvCj//xAAeEAAABAcAAAAAAAAAAAAAAAACAwQSAAEREyRCUf/aAAgBAQABPwA1QuCEeUhsNnuU6nI//8QAGREAAQUAAAAAAAAAAAAAAAAAAQAREkFx/9oACAECAQE/AHlQGL//xAAVEQEBAAAAAAAAAAAAAAAAAAARAP/aAAgBAwEBPwAL/9k=",blurWidth:8,blurHeight:8},n={src:"/_next/static/media/setopati.1c7da194.jpg",height:200,width:200,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/2wBDAQoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAVAQEBAAAAAAAAAAAAAAAAAAACBP/aAAwDAQACEAMQAAAAvQpv/8QAHxAAAQMDBQAAAAAAAAAAAAAAAQIDEQATFAQSIkFh/9oACAEBAAE/AFp1GW0oFjGtGQDym337ur//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAECAQE/AH//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPwCP/9k=",blurWidth:8,blurHeight:8},i={src:"/_next/static/media/onlinekhabar.d6a3cdee.png",height:1638,width:1638,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAOVBMVEX///8qdrDyoKKwyt+gt9LuR0lCeK71+Pv99fX53+A8ABqsb3/xcXKDrMfd5/D4xshRhLSLVGs4eLBp8eAQAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAYXRFWHRSYXcACmlwdGMKICAgICAgMzgKMzg0MjQ5NGQwNDA0MDAwMDAwMDAwMDE5MWMwMjY3MDAxNDU5MzM0YzUzNTg2NDU2NWE0ZjZlMzUzNzMyNGY0ZTUxNGE0MzQ2CjUxMDAKPppi0wAAADRJREFUeJxjYEAAdnYGDg4QLcDIzcrJwMDAwsbLxQOS4WNjFGQFSzGz8DOBpNjZ2cFqYQAAI38A/cjbidwAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},d={src:"/_next/static/media/ratopati.236db22c.jpg",height:180,width:180,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/2wBDAQoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAVAQEBAAAAAAAAAAAAAAAAAAAFB//aAAwDAQACEAMQAAAAmgPSv//EABsQAAIBBQAAAAAAAAAAAAAAAAESEQACBRNR/9oACAEBAAE/ALDjUDbm5Ig1/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERYf/aAAgBAgEBPwC4j//EABkRAAEFAAAAAAAAAAAAAAAAAAABAgNikv/aAAgBAwEBPwBY7v0f/9k=",blurWidth:8,blurHeight:8};function o(e){let t;if("routineofnepalbanda"===e)t=s;else if("ekantipur_official"===e)t=r;else if("the_himalayantimes"===e)t=l;else if("setopati"===e)t=n;else if("onlinekhabarofficial"===e)t=i;else{if("ratopati"!==e)return;t=d}return t}function c(e){return"string"!=typeof e||0===e.length?e:e.charAt(0).toUpperCase()+e.slice(1)}let u=[{icon:{src:"/_next/static/media/for-you.48cfc598.svg",height:24,width:24,blurWidth:0,blurHeight:0},title:"For You",id:"for_you"},{icon:s,title:"RONB",id:"routineofnepalbanda"},{icon:r,title:"E-Kantipur",id:"ekantipur_official"},{icon:l,title:"Himalayan Times",id:"the_himalayantimes"},{icon:n,title:"Setopati",id:"setopati"},{icon:i,title:"Online Khabar",id:"onlinekhabarofficial"},{icon:d,title:"Ratopati",id:"ratopati"}]},82081:(e,t,a)=>{a.d(t,{r:()=>C});var s=a(83451),r=a(66622),l=a(78371),n=a(68882),i=a(35222),d=a(17107),o=a(48197),c=a(84983),u=a(12560),A=a(15539),x=a(82266),h=a(62255);let m=({messages:e,status:t})=>{let[a,l]=(0,r.useState)(null),n=(e,t)=>{navigator.clipboard.writeText(e).then(()=>{l(t),setTimeout(()=>l(null),2e3)})},i=e=>{let t;let a=[],s=/```([\s\S]*?)```/g,r=0;for(;null!==(t=s.exec(e));){t.index>r&&a.push({type:"text",content:e.slice(r,t.index)});let l=t[1].trim(),n=l.split("\n")[0].match(/^\w+/)?.[0]||"text";a.push({type:"code",content:l.replace(/^\w+\n/,""),language:n}),r=s.lastIndex}r<e.length&&a.push({type:"text",content:e.slice(r)});let l=[];return a.forEach(e=>{if("code"===e.type)l.push(e);else{let t=e.content.split(/\n\n+/).filter(e=>e.trim());t.forEach((e,a)=>{let s=e.split("\n").filter(e=>e.trim()),r=[];s.forEach(e=>{let t=e.match(/^\*\*(.+?):\*\*/);if(t)r.push({type:"heading",content:t[1]});else{let t=e.match(/^(\d+)\.\s+\*\*(.+?)\*\*:\s*(.*)$/);if(t)r.push({type:"list",number:parseInt(t[1]),title:t[2],description:t[3]});else{let t;let a=/\*\*(.*?)\*\*/g,s=0;for(;null!==(t=a.exec(e));)t.index>s&&r.push({type:"text",content:e.slice(s,t.index)}),r.push({type:"bold",content:t[1]}),s=a.lastIndex;s<e.length&&r.push({type:"text",content:e.slice(s)})}}}),l.push(...r),a<t.length-1&&l.push({type:"separator"})})}}),l};return(0,s.jsx)("div",{className:"flex flex-col pb-28",children:e.map((e,r)=>e.role===o.e4.USER?(0,s.jsx)(d.w,{message:e},r):(0,s.jsx)(A.w,{title:"Answer",animate:"streaming"===t,streaming:"streaming"===t,children:(0,s.jsx)("div",{className:"flex flex-col rounded-3xl relative space-y-4 bg-transparent border mr-auto px-[1.25rem] !mb-4 !mt-4 py-2.5 w-full",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("div",{className:"w-[95%]",children:i(e.content).map((e,t)=>(0,s.jsx)("div",{className:"mb-2",children:"text"===e.type?(0,s.jsx)("span",{className:"font-medium text-gray-500 p-1 whitespace-pre-wrap",children:e.content}):"bold"===e.type?(0,s.jsx)("span",{className:"font-bold text-gray-500 p-1",children:e.content}):"heading"===e.type?(0,s.jsx)("h3",{className:"font-bold text-gray-500 text-lg mt-4 mb-2",children:e.content}):"list"===e.type?(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsxs)("span",{className:"font-medium text-gray-500 pr-2",children:[e.number,"."]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold text-gray-500",children:e.title}),(0,s.jsxs)("span",{className:"font-medium text-gray-500",children:[": ",e.description]})]})]}):"separator"===e.type?(0,s.jsx)("div",{className:"h-4"}):"code"===e.type?(0,s.jsx)(x.A,{language:e.language,style:h.A,customStyle:{borderRadius:"8px",padding:"1rem",margin:"0.5rem 0"},children:e.content}):null},t))}),(0,s.jsx)("button",{onClick:()=>n(e.content,r),className:"text-gray-500 hover:text-gray-400 focus:outline-none absolute top-2 right-3","aria-label":"Copy message",children:a===r?(0,s.jsx)(c.A,{className:"w-4 h-4 text-green-500"}):(0,s.jsx)(u.A,{className:"w-4 h-4"})})]})})},r))})};var g=a(94421),f=a(88110),p=a(99935),b=a(33383),j=a(29798);let v=({input:e,setInput:t,user:a,inputRef:r})=>{let l=(0,n.useTranslations)("inputBar");return(0,s.jsxs)("div",{className:"w-full flex dark:bg-gradient-to-r dark:from-[hsl(240,3%,27%)] dark:via-[hsl(0,0%,18%)] dark:to-[hsl(240,3%,27%)] flex-col rounded-xl bg-card border border-neutral-300 dark:border-neutral-400  focus-within:ring-tint px-3 py-2",children:[(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(g.A,{className:"!overflow-auto max-h-[150px] w-full bg-transparent text-md resize-none focus:outline-none p-0 placeholder-gray-500",placeholder:l("placeholder"),minRows:2,onChange:e=>t(e.target.value),value:e,ref:r})}),(0,s.jsx)("div",{className:"flex items-center justify-end mt-2 gap-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between w-full ",children:[(0,s.jsx)(b.A,{id:"input_bar",user:a}),(0,s.jsx)(f.$,{type:"submit",variant:"default",size:"icon",className:"rounded-full bg-blue-400 h-9 w-9 flex items-center justify-center disabled:opacity-20 hover:bg-blue-400/80 focus:bg-blue-500 focus:ring-2 focus:ring-blue-500",disabled:0===e.trim().length,children:(0,s.jsx)(p.A,{size:20})})]})})]})},w=({input:e,setInput:t,user:a,inputRef:r})=>{let l=(0,n.useTranslations)("followUpInput");return(0,s.jsxs)("div",{className:"w-full flex flex-col rounded-xl focus:outline-none px-2 py-1 bg-card border-2 items-center ",children:[(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(g.A,{ref:r,className:"!overflow-auto max-h-[150px] w-full bg-transparent text-md resize-none focus:outline-0 p-2",placeholder:l("placeholder"),onChange:e=>t(e.target.value),value:e})}),(0,s.jsxs)("div",{className:" w-full p-2 flex items-center justify-between gap-2",children:[(0,s.jsx)(b.A,{id:"follow_up_input",user:a}),(0,s.jsx)(f.$,{type:"submit",variant:"default",size:"icon",className:"rounded-full bg-blue-400 aspect-square h-8 w-8 disabled:opacity-20 hover:bg-blue-400/80 overflow-hidden",disabled:0===e.trim().length,children:(0,s.jsx)(p.A,{size:20})})]})]})},y=({handleSubmit:e,input:t,setInput:a,status:l,isFollowingUp:n=!1})=>{let[i,d]=(0,r.useState)(null),o=(0,r.useRef)(null);return(0,r.useEffect)(()=>{(async()=>{let e=(0,j.U)(),{data:{user:t}}=await e.auth.getUser();d(t)})()},[]),(0,r.useEffect)(()=>{let e=e=>{e.ctrlKey&&"q"===e.key&&(e.preventDefault(),o.current?.focus())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,s.jsx)("form",{onSubmit:t=>{t.preventDefault(),e(t),a("")},onKeyDown:s=>{"Enter"!==s.key||s.shiftKey||(s.preventDefault(),0!==t.trim().length&&(e(s),a("")))},className:"w-full shadow-md rounded-xl ",children:n?(0,s.jsx)(w,{input:t,setInput:a,user:i,inputRef:o}):(0,s.jsx)(v,{input:t,setInput:a,inputRef:o,user:i})})};var N=a(17061);let k=(e,t)=>{let{messages:a}=(0,l.Y_)();(0,r.useLayoutEffect)(()=>{let a=()=>{e.current&&t(e.current.scrollWidth)};return a(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[a,e,t])},E=e=>{(0,r.useEffect)(()=>{e.current?.focus()},[e])},C=()=>{let e=(0,n.useTranslations)("chatPanel"),t=(0,n.useTranslations)("footer"),{promptMode:a}=(0,N.JH)(),{messages:d,input:o,handleSubmit:c,status:u,setInput:A}=(0,l.Y_)({api:"/api/chat"}),{setGrokMessages:x}=(0,N.Qv)();(0,r.useEffect)(()=>{x(d)},[d,x]);let h=e=>{c(e,{body:{mode:a}})},[g,f]=(0,r.useState)(0),p=(0,r.useRef)(null),b=(0,r.useRef)(null),j=(0,r.useRef)(null);return j.current,k(p,f),E(b),(0,s.jsx)(s.Fragment,{children:d.length>0?(0,s.jsxs)("div",{ref:p,className:"mt-[72px] w-full relative",children:[(0,s.jsx)(m,{status:u,messages:d}),(0,s.jsx)("div",{ref:j}),(0,s.jsx)("div",{className:" w-full h-[123px] bg-[#ffffff] dark:bg-[hsl(240,10%,4%)] !border-none bottom-0 fixed flex items-end mr-4  shadow-none",children:(0,s.jsx)("div",{className:" max-w-screen-md  flex justify-center items-center mb-8 mt-4 ",style:{width:`${g||704}px`},children:(0,s.jsx)(y,{input:o,setInput:A,handleSubmit:h,status:!0,isFollowingUp:!0})})})]}):(0,s.jsxs)("div",{className:"w-full flex flex-col justify-center items-center mb-[5rem]",children:[(0,s.jsx)("span",{className:"pb-1 bottom-0  absolute w-full text-[12px] font bold  text-center text-gray-800 dark:text-gray-50",children:t("title")}),(0,s.jsx)("div",{className:"flex items-center justify-center mb-8",children:(0,s.jsx)("span",{className:"md:text-[40px] text-3xl ",children:e("mainTitle")})}),(0,s.jsx)(y,{input:o,setInput:A,handleSubmit:h,status:!0}),(0,s.jsx)("div",{className:"w-full h-[7.5rem] flex flex-row  justify-between space-y-2 relative",children:(0,s.jsx)(i.A,{})})]})})}},91125:(e,t,a)=>{a.d(t,{X:()=>ea});var s=a(83451),r=a(44453),l=a(48197),n=a(26028),i=a(66622),d=a.n(i),o=a(17061),c=a(18018);let u=c._.NEXT_PUBLIC_API_URL,A=async({request:e,onMessage:t})=>await (0,n.y)(`${u}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},keepalive:!0,openWhenHidden:!0,body:JSON.stringify({...e}),onmessage:t,onerror:e=>{}}),x=(e,t)=>({query:e,history:t.map(e=>({role:e.role===l.e4.USER?l.e4.USER:l.e4.ASSISTANT,content:e.content}))}),h=()=>{let{addMessage:e,messages:t,threadId:a,setThreadId:s}=(0,o.Lo)(),{model:n,promptMode:d}=(0,o.JH)(),[c,u]=(0,i.useState)(null),[h,m]=(0,i.useState)({Web:!1,Research:!1,Writing:!1,Grammar:!1,Translation:!1,Coding:!1}),[g,f]=(0,i.useState)(!1),p=[],b=(t,a)=>{switch(t.event){case l.Ti.BEGIN_STREAM:f(!0),u({...a,role:l.e4.ASSISTANT,content:"",related_queries:[],sources:[],images:[]});break;case l.Ti.SEARCH_RESULTS:let r=t.data;a.sources=r.results??[],a.images=r.images??[];break;case l.Ti.TEXT_CHUNK:if(a.content+=t.data.text,!a.agent_response)break;p=p.map(e=>({...e,status:l.c8.DONE})),a.agent_response={steps_details:p};break;case l.Ti.RELATED_QUERIES:a.related_queries=t.data.related_queries??[];break;case l.Ti.STREAM_END:let n=t.data;e({...a}),u(null),f(!1),m({...h,[d]:!0}),n.thread_id&&(s(n.thread_id),window.history.pushState({},"",`/search/${n.thread_id}`));return;case l.Ti.AGENT_QUERY_PLAN:let{steps:i}=t.data;(p=i?.map((e,t)=>({step:e,queries:[],results:[],status:l.c8.DEFAULT,step_number:t}))??[])[0].status=l.c8.CURRENT,a.agent_response={steps_details:p};break;case l.Ti.AGENT_SEARCH_QUERIES:let{queries:o,step_number:c}=t.data;p[c].queries=o,p[c].status=l.c8.CURRENT,0!==c&&(p[c-1].status=l.c8.DONE),a.agent_response={steps_details:p};break;case l.Ti.AGENT_READ_RESULTS:let{results:A,step_number:x}=t.data;p[x].results=A;break;case l.Ti.AGENT_FINISH:break;case l.Ti.ERROR:let g=t.data;e({role:l.e4.ASSISTANT,content:g.detail,related_queries:[],sources:[],images:[],agent_response:a.agent_response,is_error_message:!0}),u(null),f(!1),m({...h,[d]:!0});return}u({role:l.e4.ASSISTANT,content:a.content,related_queries:a.related_queries,sources:a.sources,images:a.images,agent_response:null!==a.agent_response?{steps:p.map(e=>e.step),steps_details:p}:null})},{mutateAsync:j}=(0,r.n)({retry:!1,mutationFn:async t=>{let s={role:l.e4.ASSISTANT,content:"",sources:[],related_queries:[],images:[],agent_response:null};e({role:l.e4.USER,content:t.query}),m({...h,[d]:!0});let r={...t,thread_id:a,model:n,pro_search:"Research"===d};await A({request:r,onMessage:e=>{e.data&&b(JSON.parse(e.data),s)}})}});return{handleSend:async e=>{await j(x(e,t))},streamingMessage:c,isStreamingMessage:g,streamingPromptMode:h}};var m=a(33681),g=a(94421),f=a(88110),p=a(99935),b=a(33383),j=a(29798),v=a(68882);let w=({input:e,setInput:t,user:a,inputRef:r})=>{let l=(0,v.useTranslations)("inputBar");return(0,s.jsxs)("div",{className:"w-full flex dark:bg-gradient-to-r dark:from-[hsl(240,3%,27%)] dark:via-[hsl(0,0%,18%)] dark:to-[hsl(240,3%,27%)] flex-col rounded-xl bg-card border border-neutral-300 dark:border-neutral-400  focus-within:ring-tint px-3 py-2",children:[(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(g.A,{className:"!overflow-auto max-h-[150px]  w-full bg-transparent text-md resize-none  focus:outline-none p-0 placeholder-gray-500",placeholder:l("placeholder"),minRows:2,onChange:e=>t(e.target.value),value:e,ref:r})}),(0,s.jsx)("div",{className:"flex items-center justify-end mt-2 gap-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between w-full ",children:[(0,s.jsx)(b.A,{id:"input_bar",user:a}),(0,s.jsx)(f.$,{type:"submit",variant:"default",size:"icon",className:"rounded-full bg-blue-400 h-9 w-9 flex items-center justify-center disabled:opacity-20 hover:bg-blue-400/80 focus:bg-blue-500 focus:ring-2 focus:ring-blue-500",disabled:0===e.trim().length,children:(0,s.jsx)(p.A,{size:20})})]})})]})},y=({input:e,setInput:t,user:a,inputRef:r})=>{let l=(0,v.useTranslations)("followUpInput");return(0,s.jsxs)("div",{className:"w-full flex flex-col rounded-xl focus:outline-none px-2 py-1 bg-card border-2 items-center ",children:[(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(g.A,{ref:r,className:"!overflow-auto max-h-[150px]  w-full bg-transparent text-md resize-none focus:outline-0 p-2",placeholder:l("placeholder"),onChange:e=>t(e.target.value),value:e})}),(0,s.jsxs)("div",{className:" w-full p-2 flex items-center justify-between gap-2",children:[(0,s.jsx)(b.A,{id:"follow_up_input",user:a}),(0,s.jsx)(f.$,{type:"submit",variant:"default",size:"icon",className:"rounded-full bg-blue-400 aspect-square h-8 w-8 disabled:opacity-20 hover:bg-blue-400/80 overflow-hidden",disabled:0===e.trim().length,children:(0,s.jsx)(p.A,{size:20})})]})]})},N=({sendMessage:e,isFollowingUp:t=!1})=>{let[a,r]=(0,i.useState)(""),[l,n]=(0,i.useState)(null),{updateProSearchCount:d}=(0,o.Lo)(),{proMode:c}=(0,o.JH)(),u=(0,i.useRef)(null);function A(){!0===c&&d(1,l.id)}return(0,i.useEffect)(()=>{(async()=>{let e=(0,j.U)(),{data:{user:t}}=await e.auth.getUser();n(t)})()},[]),(0,i.useEffect)(()=>{let e=e=>{e.ctrlKey&&"q"===e.key&&(e.preventDefault(),u.current?.focus())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,s.jsx)("form",{className:"w-full shadow-md rounded-xl overflow-hidden",onSubmit:t=>{0!==a.trim().length&&(t.preventDefault(),e(a),A(),r(""))},onKeyDown:t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),0!==a.trim().length&&(e(a),A(),r("")))},children:t?(0,s.jsx)(y,{input:a,setInput:r,user:l,inputRef:u}):(0,s.jsx)(w,{input:a,setInput:r,inputRef:u,user:l})})};var k=a(88167);let E=c._.NEXT_PUBLIC_API_URL,C=async e=>{let t=await fetch(`${E}/thread/${e}`);return await t.json()},R=e=>{let{data:t,isLoading:a,error:s}=(0,k.I)({queryKey:["thread",e],queryFn:async()=>e?C(e):null});return{data:t,isLoading:a,error:s}};var I=a(17742),S=a(41095),_=a(65169),U=a(17107),T=a(50022),Q=a(81769),D=a(2459),F=a(3070),B=a(58725),M=a(36011),L=a(18393);let z=(0,M.F)("grid",{variants:{positions:{left:"[&>li]:grid-cols-[0_min-content_1fr]",right:"[&>li]:grid-cols-[1fr_min-content]",center:"[&>li]:grid-cols-[1fr_min-content_1fr]"}},defaultVariants:{positions:"left"}}),W=d().forwardRef(({children:e,className:t,positions:a,...r},l)=>(0,s.jsx)("ul",{className:(0,L.cn)(z({positions:a}),t),ref:l,...r,children:e}));W.displayName="Timeline";let P=(0,M.F)("grid items-start gap-x-2",{variants:{status:{done:"text-primary",default:"text-muted-foreground"}},defaultVariants:{status:"default"}}),K=d().forwardRef(({className:e,status:t,...a},r)=>(0,s.jsx)("li",{className:(0,L.cn)(P({status:t}),e),ref:r,...a}));K.displayName="TimelineItem";let G=(0,M.F)("col-start-2 col-end-3 row-start-1 row-end-2 mt-3.5 flex size-3 items-center justify-center rounded-full z-10 bg-background",{variants:{status:{default:"[&>*]:hidden border-tint border-[0.5px]",current:"[&>*:not(.radix-circle)]:hidden [&>.radix-circle]:bg-tint [&>.radix-circle]:fill-tint [&>.radix-circle]:size-3",done:"bg-tint [&>*:not(.radix-check)]:hidden [&>.radix-check]:text-background [&>.radix-check]:size-2",error:"border-destructive bg-destructive [&>*:not(.radix-cross)]:hidden [&>.radix-cross]:text-background [&>.radix-cross]:size-2",custom:"[&>*:not(:nth-child(4))]:hidden [&>*:nth-child(4)]:block [&>*:nth-child(4)]:size-2"}},defaultVariants:{status:"default"}}),Y=d().forwardRef(({className:e,status:t,customIcon:a,...r},l)=>(0,s.jsxs)("div",{role:"status",className:(0,L.cn)("timeline-dot",G({status:t}),e),ref:l,...r,children:[(0,s.jsx)("div",{className:"radix-circle size-2 rounded-full"}),(0,s.jsx)(B.Srz,{className:"radix-check size-2"}),(0,s.jsx)(B.raE,{className:"radix-cross size-2"}),a]}));Y.displayName="TimelineDot";let H=(0,M.F)("row-start-1 row-end-2 text-muted-foreground",{variants:{side:{right:"col-start-3 col-end-4 mr-auto text-left",left:"col-start-1 col-end-2 ml-auto text-right"}},defaultVariants:{side:"right"}}),q=d().forwardRef(({className:e,side:t,...a},r)=>(0,s.jsx)("div",{className:(0,L.cn)(H({side:t}),e),ref:r,...a}));q.displayName="TimelineContent";let X=(0,M.F)("row-start-2 row-end-3 line-clamp-1 max-w-full truncate",{variants:{side:{right:"col-start-3 col-end-4 mr-auto text-left",left:"col-start-1 col-end-2 ml-auto text-right"},variant:{primary:"text-base font-medium text-primary",secondary:"text-sm font-light text-muted-foreground"}},defaultVariants:{side:"right",variant:"primary"}});d().forwardRef(({className:e,side:t,variant:a,...r},l)=>(0,s.jsx)("p",{role:"heading","aria-level":"primary"===a?2:3,className:(0,L.cn)(X({side:t,variant:a}),e),ref:l,...r})).displayName="TimelineHeading";let V=d().forwardRef(({className:e,done:t=!1,...a},r)=>(0,s.jsx)("hr",{role:"separator","aria-orientation":"vertical",className:(0,L.cn)("col-start-2 col-end-3 row-start-1 row-end-3 mx-auto flex h-full w-[3px] justify-center rounded-full","mt-6 mb-2","bg-muted",e),ref:r,...a}));V.displayName="TimelineLine",a(86671);let $=({step:e,queries:t,results:a})=>{let r=(0,v.useTranslations)("proRender");return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:(0,L.cn)("flex flex-col gap-1 text-xs transition-all duration-300 ease-in-out",t.length>0?"opacity-100 max-h-[500px]":"opacity-0 max-h-0 overflow-hidden"),children:[(0,s.jsx)("div",{className:"text-muted-foreground font-medium",children:r("search")}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:t.map((e,t)=>(0,s.jsxs)("div",{className:"bg-card rounded-full text-muted-foreground px-2 py-1 mr-2 mb-2 font-medium flex items-center",children:[(0,s.jsx)(Q.A,{className:"h-3 w-3 mr-1"}),e]},`query-${t}`))})]}),(0,s.jsxs)("div",{className:(0,L.cn)("flex flex-col gap-1 text-xs transition-all duration-300 ease-in-out",a.length>0?"opacity-100 max-h-[500px]":"opacity-0 max-h-0 overflow-hidden"),children:[(0,s.jsx)("div",{className:"text-muted-foreground font-medium",children:r("results")}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:a.map((e,t)=>{let a=new URL(e.url).hostname.split(".").slice(-2,-1)[0];return(0,s.jsxs)("a",{className:"bg-card rounded-full text-muted-foreground pl-2 pr-2 py-1 mr-2 mb-2 font-medium flex items-center space-x-1 hover:bg-card/80",href:e.url,target:"_blank",children:[(0,s.jsx)(F.gu,{url:e.url}),(0,s.jsx)("div",{className:"",children:a})]},`result-${t}`)})})]})]})},Z=({streamingProResponse:e,streamingPromptMode:t=!1})=>{let[a,r]=(0,i.useState)([]),n=(0,v.useTranslations)("proRender");if((0,i.useEffect)(()=>{if(!e?.steps_details)return;let t=e.steps_details;t&&r(t.map((e,t)=>({index:t,status:e.status})).filter(e=>e.status===l.c8.CURRENT).map(e=>e.index.toString()))},[e]),e?.steps_details||e?.steps?.length,!e?.steps_details)return null;let{steps_details:d}=e;return(0,s.jsxs)("div",{className:"w-full border rounded-lg p-4 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(D.A,{className:"h-5 w-5 mr-2"}),(0,s.jsx)("h1",{className:"text-lg font-medium ",children:n("title")})]}),(0,s.jsx)(_.w,{}),(0,s.jsx)(W,{className:"w-full",children:d.map(({step:e,queries:t,results:n,status:i},o)=>{let c=o===d.length-1;return(0,s.jsxs)(K,{status:"default",children:[(0,s.jsx)(Y,{status:i}),!c&&(0,s.jsx)(V,{done:!0}),(0,s.jsx)(q,{className:"w-full",children:(0,s.jsx)(T.nD,{type:"multiple",className:"w-full",value:a,onValueChange:r,children:(0,s.jsxs)(T.As,{value:o.toString(),className:(0,L.cn)(c?"border-b-0":""),disabled:i!==l.c8.DONE||c,children:[(0,s.jsx)(T.$m,{className:"w-full text-left hover:no-underline hover:bg-card/80 rounded-md px-2 py-2 my-1 text-primary",children:e}),(0,s.jsx)(T.ub,{className:"w-full px-3 py-1",children:(0,s.jsx)($,{step:e,queries:t||[],results:n||[]})})]})})})]},o)})})]})},O=(0,i.memo)(({messages:e,streamingMessage:t,isStreamingMessage:a,streamingPromptMode:r,onRelatedQuestionSelect:n})=>{let i=t?.agent_response;return(0,s.jsxs)("div",{className:"flex flex-col pb-28",children:[e.map((t,a)=>t.role===l.e4.USER?(0,s.jsx)(U.w,{message:t},a):(0,s.jsxs)(s.Fragment,{children:[t.agent_response&&(0,s.jsx)(Z,{streamingProResponse:t.agent_response}),(0,s.jsx)(S.F,{message:t,onRelatedQuestionSelect:n},a),a!==e.length-1&&(0,s.jsx)(_.w,{})]})),r.Research&&(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(Z,{streamingProResponse:i??null,streamingPromptMode:r.Research})}),t&&a&&(0,s.jsx)(S.F,{message:t,isStreaming:!0,onRelatedQuestionSelect:n})]})});var J=a(35222);let ee=(e,t)=>{let{messages:a}=(0,o.Lo)();(0,i.useEffect)(()=>{let a=()=>{e.current&&t(e.current.scrollWidth)};return a(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[a,e,t])},et=e=>{(0,i.useEffect)(()=>{e.current?.focus()},[e])},ea=({threadId:e})=>{let t=(0,v.useTranslations)("chatPanel"),a=(0,v.useTranslations)("footer"),r=(0,m.useSearchParams)().get("q"),l=(0,i.useRef)(!1),{handleSend:n,streamingMessage:d,isStreamingMessage:c,streamingPromptMode:u}=h(),{messages:A,setMessages:x,setThreadId:g}=(0,o.Lo)(),{data:f,isLoading:p,error:b}=R(e),[j,w]=(0,i.useState)(0),y=(0,i.useRef)(null),k=(0,i.useRef)(null);return ee(y,w),et(k),(0,i.useEffect)(()=>{r&&!l.current&&(g(null),l.current=!0,n(r))},[r]),(0,i.useEffect)(()=>{f&&(g(f.thread_id),x(f.messages||[]))},[e,f,x,g]),(0,i.useEffect)(()=>{0==A.length&&g(null)},[A,g]),(0,s.jsx)(s.Fragment,{children:A.length>0||e?p?(0,s.jsx)("div",{className:"w-full flex justify-center items-center",children:(0,s.jsx)(I.A,{className:"animate-spin w-8 h-8"})}):(0,s.jsxs)("div",{ref:y,className:"mt-[72px] w-full relative",children:[(0,s.jsx)(O,{messages:A,streamingMessage:d,isStreamingMessage:c,streamingPromptMode:u,onRelatedQuestionSelect:n}),(0,s.jsx)("div",{className:" w-full h-[123px] z-[100]  bg-[#ffffff] dark:bg-[hsl(240,10%,4%)] bottom-0 fixed flex items-end mr-4 ",children:(0,s.jsx)("div",{className:" max-w-screen-md  flex justify-center items-center mb-8 mt-4 ",style:{width:`${j}px`},children:(0,s.jsx)(N,{isFollowingUp:!0,sendMessage:n})})})]}):(0,s.jsxs)("div",{className:"w-full  flex flex-col justify-center items-center mb-[5rem]",children:[(0,s.jsx)("span",{className:"pb-1 bottom-0  absolute w-full text-[12px] font bold  text-center text-gray-800 dark:text-gray-50",children:a("title")}),(0,s.jsx)("div",{className:"flex items-center justify-center mb-8",children:(0,s.jsx)("span",{className:"md:text-[40px] text-3xl ",children:t("mainTitle")})}),(0,s.jsx)(N,{sendMessage:n}),(0,s.jsx)("div",{className:"w-full h-[7.5rem] flex flex-row  justify-between space-y-2 relative",children:(0,s.jsx)(J.A,{})})]})})}},17107:(e,t,a)=>{a.d(t,{w:()=>r});var s=a(83451);let r=({message:e})=>(0,s.jsx)("div",{className:"mt-8 mb-8",children:(0,s.jsx)("span",{className:"text-base",children:e.content})})},33383:(e,t,a)=>{a.d(t,{A:()=>f});var s=a(83451),r=a(18393),l=a(17061),n=a(66622);a(29798),a(54741);var i=a(68882),d=a(92286),o=a(48197),c=a(9408),u=a(98093),A=a(2459),x=a(80470),h=a(9018);let m={[o.Ix.Web]:{name:"Web",description:null,value:o.Ix.Web,smallIcon:(0,s.jsx)(c.A,{className:"w-4 h-4  text-green-600 hover:text-green-400"}),icon:(0,s.jsx)(c.A,{className:"w-5 h-5 text-green-600  "})},[o.Ix.Research]:{name:"Research",description:null,value:o.Ix.Research,smallIcon:(0,s.jsx)(u.A,{className:"w-4 h-4 text-blue-600  hover:text-blue-400"}),icon:(0,s.jsx)(u.A,{className:"w-5 h-5 text-blue-600   "})},[o.Ix.Writing]:{name:"Writing",description:null,value:o.Ix.Writing,smallIcon:(0,s.jsx)(A.A,{className:"w-4 h-4 text-purple-600 hover:text-purple-400 "}),icon:(0,s.jsx)(A.A,{className:"w-5 h-5 text-purple-600 "})},[o.Ix.Grammar]:{name:"Grammar",description:null,value:o.Ix.Grammar,smallIcon:(0,s.jsx)(x.A,{className:"w-4 h-4 text-yellow-600 hover:text-yellow-600  "}),icon:(0,s.jsx)(x.A,{className:"w-5 h-5 text-yellow-600 "})},[o.Ix.Translation]:{name:"Translation",description:null,value:o.Ix.Translation,smallIcon:(0,s.jsx)(h.A,{className:"w-4 h-4 text-pink-600  hover:text-pink-600 "}),icon:(0,s.jsx)(h.A,{className:"w-5 h-5 text-pink-600 "})}},g=({model:e,disabled:t})=>{let a;return"Web"===e.name&&(a="text-green-600"),"Grammar"===e.name&&(a="text-yellow-600"),"Research"===e.name&&(a="text-blue-600"),"Writing"===e.name&&(a="text-purple-600"),"Translation"===e.name&&(a="text-pink-600"),(0,s.jsx)(d.eb,{value:e.value,className:(0,r.cn)("flex flex-col items-start px-2 py-3 rounded-lg ",t&&"cursor-not-allowed opacity-50"),children:(0,s.jsxs)("div",{className:"flex items-center space-x-3 text-gray-600",children:[e.icon,(0,s.jsxs)("div",{className:"flex flex-col text-base ",children:[(0,s.jsx)("span",{className:(0,r.cn)(a),children:e.name}),(0,s.jsx)("span",{children:e.description})]})]})},e.value)};function f({user:e,id:t}){let a;let[c,u]=(0,n.useState)(null),{proSearchCount:A,fetchProSearchCount:x}=(0,l.Lo)();(0,i.useTranslations)("proToggle");let{promptMode:h,setPromptMode:f}=(0,l.JH)(),p=m[h]??m[o.Ix.Web];return"Web"===p.name&&(a="text-green-600 hover:text-green-400 bg-green-100 hover:border-green-400 dark:hover:border-green-300 dark:bg-neutral-600 dark:hover:text-green-400 "),"Grammar"===p.name&&(a="text-yellow-600 hover:text-yellow-400 bg-yellow-100 hover:border-yellow-400 dark:hover:border-yellow-300 dark:bg-neutral-600 dark:hover:text-yellow-400"),"Research"===p.name&&(a="text-blue-600 hover:text-blue-400 bg-blue-100 hover:border-blue-400 dark:hover:border-blue-300 dark:bg-neutral-600 dark:hover:text-blue-400"),"Writing"===p.name&&(a="text-purple-600 hover:text-purple-400 bg-purple-100 hover:border-purple-400 dark:hover:border-purple-300 dark:bg-neutral-600 dark:hover:text-purple-400"),"Translation"===p.name&&(a="text-pink-600 hover:text-pink-400 bg-pink-100 hover:border-pink-400 dark:hover:border-pink-300 dark:bg-neutral-600 dark:hover:text-pink-400"),(0,s.jsxs)(d.l6,{defaultValue:h,value:h,onValueChange:e=>{e&&f(e)},children:[(0,s.jsx)(d.bq,{className:(0,r.cn)(a,"w-fit  space-x-2     border-gray-300  dark:border-gray-400    select-none rounded-full  focus:!ring-0 focus:!ring-offset-transparent focus:!outline-0 shadow-none transition-all duration-500 ease-in-out  text-[14px]"),children:(0,s.jsx)(d.yv,{children:(0,s.jsxs)("div",{className:"flex items-center  space-x-1  ",children:[(0,s.jsx)("div",{children:p.smallIcon}),(0,s.jsx)("span",{className:"medium",children:p.name})]})})}),(0,s.jsx)(d.gC,{align:"start",side:"bottom",className:"w-[225px] border border-transparent  rounded-xl shadow-2xl ",children:(0,s.jsx)(d.s3,{className:"w-full border border-transparent rounded-lg px-1",children:Object.values(m).map((t,a)=>(0,s.jsx)(g,{model:t,disabled:!e&&0!==a},a))})})]})}},50022:(e,t,a)=>{a.d(t,{$m:()=>c,As:()=>o,nD:()=>d,ub:()=>u});var s=a(83451),r=a(66622),l=a(91070),n=a(483),i=a(18393);let d=l.bL,o=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(l.q7,{ref:a,className:(0,i.cn)("border-b",e),...t}));o.displayName="AccordionItem";let c=r.forwardRef(({className:e,children:t,...a},r)=>(0,s.jsx)(l.Y9,{className:"flex",children:(0,s.jsxs)(l.l9,{ref:r,className:(0,i.cn)("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",e),...a,children:[t,(0,s.jsx)(n.A,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));c.displayName=l.l9.displayName;let u=r.forwardRef(({className:e,children:t,...a},r)=>(0,s.jsx)(l.UC,{ref:r,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...a,children:(0,s.jsx)("div",{className:(0,i.cn)("pb-4 pt-0",e),children:t})}));u.displayName=l.UC.displayName},35222:(e,t,a)=>{a.d(t,{A:()=>W});var s=a(83451),r=a(66622),l=a(7232),n=a(88110),i=a(85357);a(85091);var d=a(53097);function o({onRemove:e}){let[t,a]=(0,r.useState)({year:"",month:"",day:"",week:""}),[o,c]=(0,r.useState)(!1);return(0,s.jsx)(l.Zp,{className:"shadow-none relative h-full flex  dark:bg-[hsl(240,3%,27%)]   bg-[#eeeee4] border dark:border-neutral-400 dark:hover:border-neutral-100 border-neutral-400 hover:border-neutral-300 text-gray-800 overflow-hidden",children:(0,s.jsxs)(l.Wu,{className:"flex flex-col items-start w-[95%] text-start h-full p-2 gap-2",children:[(0,s.jsxs)("div",{className:"flex justify-start gap-2 items-center mt-2  text-[hsl(222,8%,48%)] dark:text-gray-400",children:[(0,s.jsxs)("span",{className:"font-bold text-4xl",children:[" ",t.day]}),(0,s.jsxs)("div",{className:"w-[60%] flex flex-wrap gap-[2px]",children:[(0,s.jsxs)("span",{className:" text-lg",children:[" ",t.week]}),(0,s.jsxs)("span",{className:" text-lg",children:[t.month," "]}),(0,s.jsx)("span",{className:"text-lg ",children:t.year})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4 ",children:[(0,s.jsx)(d.l,{pressed:o,onPressedChange:()=>{c(!o)},"aria-label":"Toggle temperature unit",className:"text-gray-600 dark:text-gray-400  absolute bottom-1 right-1 flex !justify-center !bg-[#bfc1c738] !h-6 !items-center rounded-lg min-w-6  !p-1",children:o?"np":"en"}),(0,s.jsx)("div",{className:"absolute right-0 top-0",children:(0,s.jsx)(n.$,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-600 dark:text-gray-400 h-2 w-2 p-3 rounded-full hover:text-gray-800 hover:bg-gray-400 dark:hover:bg-neutral-800 dark:hover:text-gray-400",children:(0,s.jsx)(i.A,{className:"h-2 w-2"})})})]})]})})}var c=a(50363),u=a(21744),A=a(29023),x=a(45724),h=a(34974),m=a(61975),g=a(88947),f=a(12219),p=a(19602),b=a(437),j=a(36011),v=a(18393);let w=(0,j.F)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),y=r.forwardRef(({className:e,variant:t,size:a,...r},l)=>(0,s.jsx)(d.b,{ref:l,className:(0,v.cn)(w({variant:t,size:a,className:e})),...r}));y.displayName=d.b.displayName;var N=a(88167);let k={Clear:{day:(0,s.jsx)(c.A,{strokeWidth:1.35}),night:(0,s.jsx)(u.A,{strokeWidth:1.35})},Clouds:{day:(0,s.jsx)(A.A,{strokeWidth:1.35}),night:(0,s.jsx)(x.A,{strokeWidth:1.35})},Rain:{day:(0,s.jsx)(h.A,{strokeWidth:1.35}),night:(0,s.jsx)(m.A,{strokeWidth:1.35})},Drizzle:{day:(0,s.jsx)(g.A,{strokeWidth:1.35}),night:(0,s.jsx)(g.A,{strokeWidth:1.35})},Thunderstorm:{day:(0,s.jsx)(f.A,{strokeWidth:1.35}),night:(0,s.jsx)(f.A,{strokeWidth:1.35})},Snow:{day:(0,s.jsx)(p.A,{strokeWidth:1.35}),night:(0,s.jsx)(p.A,{strokeWidth:1.35})},Fog:{day:(0,s.jsx)(b.A,{strokeWidth:1.35}),night:(0,s.jsx)(b.A,{strokeWidth:1.35})}};function E({onRemove:e}){let t,a,d;let[o,c]=(0,r.useState)(null),[u,A]=(0,r.useState)(!1);(0,r.useCallback)(async()=>{try{let e=await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}),t={lat:e.coords.latitude,lon:e.coords.longitude};c(t),localStorage.setItem("lastLocation",JSON.stringify(t))}catch(t){console.error("Error getting location:",t);let e=localStorage.getItem("lastLocation");e?c(JSON.parse(e)):c({lat:27.7172,lon:85.324})}},[]);let{data:x,error:h}=(0,N.I)({queryKey:["weather",o?.lat,o?.lon],queryFn:async()=>{if(!o)throw Error("No coordinates available");let e=process.env.NEXT_PUBLIC_WEATHER_API_KEY,t=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${o.lat}&lon=${o.lon}&units=metric&appid=${e}`);if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);return t.json()},enabled:!!o,refetchOnWindowFocus:!1,staleTime:3e5,gcTime:6e5}),m=x?.weather[0].main||"Clouds",g=x?(t=x.sys.sunrise,a=x.sys.sunset,(d=x.dt)>=t&&d<a)?"day":"night":"day",f=k[m]?k[m][g]:k.Clouds.day;return(0,s.jsx)(l.Zp,{className:"shadow-none relative h-full flex dark:bg-[hsl(240,3%,27%)] bg-[#eeeee4] border dark:border-neutral-400 dark:hover:border-neutral-100 border-neutral-400 hover:border-neutral-300 text-gray-800 overflow-hidden",children:(0,s.jsxs)(l.Wu,{className:"flex flex-col items-start text-start h-full p-2 gap-1 w-full",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"w-full flex text-base gap-2 justify-between items-center text-gray-600 dark:text-gray-400",children:[f,(0,s.jsx)("span",{children:m})]}),(0,s.jsx)(y,{pressed:u,onPressedChange:()=>{A(!u)},"aria-label":"Toggle temperature unit",className:"text-gray-600 dark:text-gray-400 absolute bottom-1 right-1 flex !justify-center !bg-[#bfc1c738] !h-6 !items-center rounded-lg min-w-6 !p-1",children:u?"\xb0C":"\xb0F"}),(0,s.jsx)("div",{className:"absolute right-0 top-0",children:(0,s.jsx)(n.$,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-600 dark:text-gray-400 h-2 w-2 p-3 rounded-full hover:text-gray-800 hover:bg-gray-400 dark:hover:bg-neutral-800 dark:hover:text-gray-400",children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})})]}),(0,s.jsxs)("div",{className:"flex w-[85%] overflow-hidden items-center h-fit gap-2 text-[hsl(222,8%,48%)] dark:text-gray-400",children:[(0,s.jsxs)("div",{className:"flex items-center justify-start",children:[(0,s.jsx)("span",{className:"font-semibold text-4xl",children:x?(0,v.xZ)(x,u):"--"}),(0,s.jsxs)("span",{className:"text-2xl font-regular",children:["\xb0",u?"F":"C"]})]}),(0,s.jsx)("div",{className:"flex flex-col gap-1 justify-start",children:(0,s.jsx)("p",{title:x?.name,className:"text-base",children:x?.name})})]})]})})}var C=a(82325),R=a(7405);let I=async()=>{let e=await fetch("https://walrus-app-xoils.ondigitalocean.app/api/RONB/instagram-posts/");if(!e.ok)throw Error((await e.json()).detail||"Failed to fetch latest post");let t=await e.json();if(!Array.isArray(t)||0===t.length)throw Error("No posts available");let a=t[0];return{id:a.id||"default_id",caption:a.caption||"No caption",username:a.username||"Unknown",like_count:a.like_count||0}},S=()=>(0,N.I)({queryKey:["firstPost"],queryFn:I,retry:3,staleTime:3e5,refetchInterval:3e5});var _=a(33733);function U({onRemove:e}){let{data:t,isLoading:a,isError:r,error:d}=S();if(a)return(0,s.jsx)(l.Zp,{className:"shadow-none relative h-full flex dark:bg-[hsl(240,3%,27%)] bg-[#eeeee4] border dark:border-neutral-400 dark:hover:border-neutral-100 border-neutral-400 hover:border-neutral-300 text-gray-800 overflow-hidden",children:(0,s.jsxs)(l.Wu,{className:"flex flex-col items-start w-[90%] text-start h-full p-0 pl-2 pt-2",children:[(0,s.jsx)("div",{children:"Fetching news..."}),(0,s.jsx)("div",{className:"absolute right-0 top-0",children:(0,s.jsx)(n.$,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-600 dark:text-gray-400 h-2 w-2 p-3 rounded-full hover:text-gray-800 hover:bg-gray-400 dark:hover:bg-neutral-800 dark:hover:text-gray-400",children:(0,s.jsx)(i.A,{className:"h-1 w-2"})})})]})});if(r)return(0,s.jsx)(l.Zp,{className:"shadow-none relative h-full flex dark:bg-[hsl(240,3%,27%)] bg-[#eeeee4] border dark:border-neutral-400 dark:hover:border-neutral-100 border-neutral-400 hover:border-neutral-300 text-gray-800 overflow-hidden",children:(0,s.jsxs)(l.Wu,{className:"flex flex-col items-start w-[90%] text-start h-full p-0 pl-2 pt-2",children:[(0,s.jsxs)("div",{children:["Error: ",d?.message||"Failed to load news"]}),(0,s.jsx)("div",{className:"absolute right-0 top-0",children:(0,s.jsx)(n.$,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-600 dark:text-gray-400 h-2 w-2 p-3 rounded-full hover:text-gray-800 hover:bg-gray-400 dark:hover:bg-neutral-800 dark:hover:text-gray-400",children:(0,s.jsx)(i.A,{className:"h-1 w-2"})})})]})});if(!t)return(0,s.jsx)(l.Zp,{className:"shadow-none relative h-full flex dark:bg-[hsl(240,3%,27%)] bg-[#eeeee4] border dark:border-neutral-400 dark:hover:border-neutral-100 border-neutral-400 hover:border-neutral-300 text-gray-800 overflow-hidden",children:(0,s.jsxs)(l.Wu,{className:"flex flex-col items-start w-[90%] text-start h-full p-0 pl-2 pt-2",children:[(0,s.jsx)("div",{children:"No news available"}),(0,s.jsx)("div",{className:"absolute right-0 top-0",children:(0,s.jsx)(n.$,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-600 dark:text-gray-400 h-2 w-2 p-3 rounded-full hover:text-gray-800 hover:bg-gray-400 dark:hover:bg-neutral-800 dark:hover:text-gray-400",children:(0,s.jsx)(i.A,{className:"h-1 w-2"})})})]})});let o=(0,v.gL)(t.caption,50);return(0,s.jsx)(l.Zp,{className:"shadow-none relative h-full flex dark:bg-[hsl(240,3%,27%)] bg-[#eeeee4] border dark:border-neutral-400 dark:hover:border-neutral-100 border-neutral-400 hover:border-neutral-300 text-gray-800 overflow-hidden",children:(0,s.jsxs)(l.Wu,{className:"flex flex-col items-start w-[90%] text-start h-full p-0 pl-2 pt-2",children:[(0,s.jsxs)("div",{title:t.caption,className:"font-medium md:!h-auto h-auto md:text-sm text-lg items-start text-[hsl(222,8%,48%)] dark:text-gray-400",children:[(0,s.jsxs)(R.eu,{className:"left-0 inline-block mr-1 align-middle h-[16px] w-[16px]",children:[(0,s.jsx)(R.BK,{src:_.L0(t.username)?.src}),(0,s.jsx)(R.q5,{children:"Lg"})]}),o]}),(0,s.jsxs)("span",{className:"flex absolute right-2 bottom-1 ml-auto gap-0.5 justify-start items-center",children:[(0,s.jsx)(C.A,{fill:"#f73056",strokeWidth:0,className:"w-3 h-3 dark:text-gray-400"}),(0,s.jsx)("span",{className:"text-[12px] text-gray-600 dark:text-gray-400",children:t.like_count.toString()})]}),(0,s.jsx)("div",{className:"absolute right-0 top-0",children:(0,s.jsx)(n.$,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-600 dark:text-gray-400 h-2 w-2 p-3 rounded-full hover:text-gray-800 hover:bg-gray-400 dark:hover:bg-neutral-800 dark:hover:text-gray-400",children:(0,s.jsx)(i.A,{className:"h-1 w-2"})})})]})})}var T=a(17061),Q=a(94199);a(95944),a(15128);let D=[{type:"date",label:"Date"},{type:"weather",label:"Weather"},{type:"news",label:"News"}];var F=a(54309),B=a(4917);function M({activeWidgets:e,sliderSettings:t,renderWidget:a,addWidget:r}){return(0,s.jsxs)("div",{className:"mt-6 w-[calc(100%-1rem)]",children:[(0,s.jsxs)(F.rI,{children:[(0,s.jsx)(F.ty,{asChild:!0,children:(0,s.jsx)(n.$,{className:" absolute top-[20%] -right-[0px] !h-2 !w-2 p-2 focus-visible:!ring-0 hover:!bg-neutral-100 dark:bg-neutral-900 dark:hover:!bg-neutral-900 text-neutral-950 dark:text-neutral-50 dark:hover:text-neutral-300 hover:text-neutral-600 bg-neutral-100 rounded-full",children:(0,s.jsx)(B.A,{className:"!w-4 !h-4 text-gray-600"})})}),(0,s.jsx)(F.SQ,{children:D.map(t=>(0,s.jsx)(F._2,{onClick:()=>r(t.type),disabled:e.includes(t.type),children:t.label},t.type))})]}),(0,s.jsx)(Q.A,{...t,children:e.map((e,t)=>(0,s.jsx)("div",{className:" mb-2  !flex !justify-center items-center  !w-[100%]",children:(0,s.jsx)("div",{className:"!w-[90%] h-20",children:a(e,t)})},t))})]})}var L=a(38180);function z({addWidget:e,activeWidgets:t,onDragEnd:a,renderWidget:r}){return(0,s.jsxs)("div",{className:"mt-6 w-full",children:[(0,s.jsxs)(F.rI,{children:[(0,s.jsx)(F.ty,{asChild:!0,children:(0,s.jsx)(n.$,{className:"absolute top-[20%] -right-[0px] !h-2 !w-2 p-2 focus-visible:!ring-0 hover:!bg-neutral-100 dark:bg-neutral-900 dark:hover:!bg-neutral-900 text-neutral-950 dark:text-neutral-50 dark:hover:text-neutral-300 hover:text-neutral-600 bg-neutral-100 rounded-full",children:(0,s.jsx)(B.A,{className:"!w-4 !h-4 text-gray-600"})})}),(0,s.jsx)(F.SQ,{children:D.map(a=>(0,s.jsx)(F._2,{onClick:()=>e(a.type),disabled:t.includes(a.type),children:a.label},a.type))})]}),(0,s.jsx)(L.JY,{onDragEnd:a,children:(0,s.jsx)(L.gL,{droppableId:"widgets",direction:"horizontal",children:e=>(0,s.jsxs)("div",{className:"flex flex-wrap justify-center md:justify-start gap-4",...e.droppableProps,ref:e.innerRef,children:[t.map((e,t)=>(0,s.jsx)(L.sx,{draggableId:e,index:t,children:a=>(0,s.jsx)("div",{ref:a.innerRef,...a.draggableProps,...a.dragHandleProps,className:"w-[calc(32%-0.5rem)] h-20 mb-4",children:r(e,t)})},e)),e.placeholder]})})})]})}function W(){let{activeWidgets:e,setActiveWidgets:t,isWidgetVisible:a}=(0,T.ZS)(),[l,n]=(0,r.useState)(!1),i=a=>{e.includes(a)||t([...e,a])},d=a=>{t(e.filter(e=>e!==a))},c=(e,t)=>{let a={onRemove:()=>d(e),index:t};switch(e){case"date":return(0,s.jsx)(o,{...a},e);case"weather":return(0,s.jsx)(E,{...a},e);case"news":return(0,s.jsx)(U,{...a},e);default:return null}};if(!a)return null;if(!l)return(0,s.jsx)(z,{renderWidget:c,activeWidgets:e,addWidget:i,onDragEnd:a=>{if(!a.destination)return;let s=Array.from(e),[r]=s.splice(a.source.index,1);s.splice(a.destination.index,0,r),t(s)}});{let t={dots:!0,infinite:e.length>1,speed:500,slidesToShow:1,slidesToScroll:1,autoplay:e.length>1,autoplaySpeed:3e3,arrows:!1};return(0,s.jsx)(M,{renderWidget:c,activeWidgets:e,sliderSettings:t,addWidget:i})}}}};