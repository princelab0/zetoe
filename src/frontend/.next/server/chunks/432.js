"use strict";exports.id=432,exports.ids=[432],exports.modules={74729:(e,s,t)=>{t.r(s),t.d(s,{"4083467d242aeff4847b182036363309dceed58a07":()=>a.A,"4084552e6bdfc0b6822047ffb804273742135ce0a7":()=>l.q,"605a1181c524e284913fe0b0ee1e44f43f54659df8":()=>l.s});var l=t(30300),a=t(96091)},41095:(e,s,t)=>{t.d(s,{F:()=>O,K:()=>R});var l=t(83451),a=t(66622),n=t.n(a),r=t(76420);let i=(0,a.memo)(r.o,(e,s)=>e.children===s.children&&e.className===s.className);var d=t(16306),o=t(25861),c=t.n(o),m=t(18393),x=t(86671),h=t(69776),u=t(25334),f=t(29758),p=t(483);let g=({number:e,href:s})=>`
  <button className="select-none no-underline">
  <a className="" href="${s}" target="_blank">
        <span className="relative -top-[0rem] inline-flex">
          <span className="h-[1rem] min-w-[1rem] items-center justify-center rounded-full text-center px-1 text-xs font-mono bg-muted text-[0.60rem] text-muted-foreground">
            ${e}
          </span>
        </span>
      </a>
    </button>`,j=({children:e,isStreaming:s,containerElement:t="p"})=>{let a=e=>"string"==typeof e?(s?function(e){let s=e.split(" ");return c().chunk(s,2).map(e=>e.join(" ")+" ")}(e):[e]).flatMap((e,t)=>(0,l.jsx)("span",{className:(0,m.cn)(s?"animate-in fade-in-25 duration-700":""),children:e},`${t}-streaming`)):n().isValidElement(e)?n().cloneElement(e,e.props,a(e.props.children)):Array.isArray(e)?e.map((e,s)=>(0,l.jsx)(n().Fragment,{children:a(e)},s)):null,r=a(e);return n().createElement(t,{},r)},v=(0,a.memo)(({children:e})=>(0,l.jsx)(j,{isStreaming:!0,containerElement:"p",children:e})),N=(0,a.memo)(({children:e})=>(0,l.jsx)(j,{isStreaming:!1,containerElement:"p",children:e})),w=(0,a.memo)(({children:e})=>(0,l.jsx)(j,{isStreaming:!1,containerElement:"li",children:e})),b=(0,a.memo)(({children:e})=>(0,l.jsx)(j,{isStreaming:!0,containerElement:"li",children:e}));v.displayName="StreamingParagraph",N.displayName="Paragraph",w.displayName="ListItem",b.displayName="StreamingListItem";let E=({children:e,isExpanded:s,onToggle:t,isStreaming:n})=>{let r=(0,a.useRef)(null);return console.log("ThinkBox Render - isExpanded:",s,"isStreaming:",n),(0,a.useEffect)(()=>{if(n&&r.current){let e=setInterval(()=>{h.Nk.scrollTo(r.current.scrollHeight,{duration:2e3,smooth:"easeInOutQuad",containerId:r.current?.id||"think-scroll-container"})},1e3);return()=>clearInterval(e)}},[n]),console.log("ThinkBox - Applying class:",{isStreaming:n,isExpanded:s,className:(0,m.cn)("mt-1 text-sm text-gray-700 prose dark:prose-invert",n?"h-20 overflow-y-auto":s?"h-auto":"h-0 overflow-hidden")}),(0,l.jsxs)("div",{className:"my-4 bg-transparent rounded-3xl shadow-sm border border-neutral-500/40",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-1 justify-center items-start cursor-pointer",onClick:()=>{console.log("Header clicked, toggling isExpanded"),t()},children:[(0,l.jsxs)("div",{className:"text-base w-full flex items-center justify-between text-[#0A0a0a] px-5 pt-4  ",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{children:(0,l.jsx)(u.A,{width:16,height:16})}),(0,l.jsx)("span",{className:"font-semibold",children:"Thought for "}),(0,l.jsx)("span",{className:"font-medium text-[hsl(216,4%,51%)] text-sm ",children:n?"...":"9s"})]}),(0,l.jsx)("span",{className:"text-xs text-gray-500",children:s?(0,l.jsx)(f.A,{}):(0,l.jsx)(p.A,{})})]}),(0,l.jsxs)("p",{className:"w-full align-middle ml-0.5 font-semibold text-sm text-gray-500 px-5 pb-4",children:[s?"Collapse":"Expand"," for details"]})]}),(0,l.jsx)("div",{ref:r,id:"think-scroll-container",className:(0,m.cn)("mt-1 px-5  font-medium break-words !leading-[1.8] max-w-full text-sm  prose dark:prose-invert",n?"h-20 overflow-y-auto":s?"h-auto":"h-0 overflow-hidden"),style:{transition:"height 0.3s ease"},children:e})]})},y=({message:e,isStreaming:s=!1})=>{let{content:t,sources:n}=e,[r,o]=(0,a.useState)(t),[c,m]=(0,a.useState)(s);console.log("MessageComponent Render - isExpanded:",c,"isStreaming:",s),(0,a.useEffect)(()=>{let e=t.match(/<think>([\s\S]*?)<\/think>/),s=t;if(e){let l=e[1].trim();s=t.replace(/<think>[\s\S]*?<\/think>/,`<div class="thinking-content">${l}</div>`)}let l=s.replace(/(\[\d+\])/g,e=>{let s=e.slice(1,-1),t=n?.find((e,t)=>t+1===parseInt(s));return g({number:parseInt(s),href:t?.url??""})});o(l),console.log("Parsed Message:",l)},[t,n]),(0,a.useEffect)(()=>{s&&(console.log("Streaming started, setting isExpanded to true"),m(!0))},[s]);let x=r.match(/<div class="thinking-content">([\s\S]*?)<\/div>/),h=x?x[1]:"",u=x?r.replace(/<div class="thinking-content">[\s\S]*?<\/div>/,"").trim():r;return(0,l.jsxs)(l.Fragment,{children:[h&&(0,l.jsx)(E,{isExpanded:c,onToggle:()=>{console.log("Toggling isExpanded from:",c),m(e=>{let s=!e;return console.log("New isExpanded value:",s),s})},isStreaming:s,children:(0,l.jsx)(i,{components:{p:s?v:N,li:s?b:w},rehypePlugins:[d.A],children:h})},`think-box-${c}`),u&&(0,l.jsx)(i,{components:{p:s?v:N,li:s?b:w},className:"prose dark:prose-invert inline leading-relaxed break-words mt-2",rehypePlugins:[d.A],children:u})]})},A=()=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(x.E,{className:"w-full py-4 bg-card",children:(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsx)(x.E,{className:"mx-5 h-2 bg-primary/30"}),(0,l.jsx)(x.E,{className:"mx-5 h-2 bg-primary/30 mr-20"}),(0,l.jsx)(x.E,{className:"mx-5 h-2 bg-primary/30 mr-40"})]})})});var _=t(4917);function k({questions:e,onSelect:s}){return(0,l.jsx)("div",{className:"divide-y border-t mt-2",children:e.map((e,t)=>(0,l.jsxs)("div",{className:"flex cursor-pointer items-center py-2 font-medium justify-between ",onClick:()=>s(e),children:[(0,l.jsx)("span",{children:e.toLowerCase()}),(0,l.jsx)(_.A,{className:"text-tint mr-2",size:20})]},`question-${t}`))})}var L=t(3070),I=t(15539),S=t(3130),C=t(76306);let P=()=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"my-4 grid grid-cols-1 gap-2 lg:grid-cols-2 w-full",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,l.jsx)("div",{className:"w-full h-full",children:(0,l.jsx)(x.E,{className:"rounded-md object-cover shadow-none border-none w-full bg-card h-[160px] "})},`image-skeleton-${s}`))})});function T({images:e}){return e&&e.length>0?(0,l.jsx)("div",{className:"my-4 grid grid-cols-1 gap-2 lg:grid-cols-2",children:e.map(e=>(0,l.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"aspect-video w-full h-full overflow-hidden hover:scale-[1.03] duration-150 rounded-lg transition-all shadow-md",children:(0,l.jsx)("img",{src:e,className:"w-full object-cover object-top h-full max-h-[80vh]"})},e))}):null}function R({content:e}){return(0,l.jsxs)(C.Fc,{className:"bg-red-500/5 border-red-500/15 p-5 mb-10",children:[(0,l.jsx)(S.A,{className:"h-4 w-4 stroke-red-500 stroke-2"}),(0,l.jsx)(C.TN,{className:"text-base text-foreground",children:e.split(" ").map((e,s)=>/(https?:\/\/[^\s]+)/g.test(e)?(0,l.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"underline",children:e},s):e+" ")})]})}let O=({message:e,isStreaming:s=!1,onRelatedQuestionSelect:t})=>{let{sources:a,content:n,related_queries:r,images:i,is_error_message:d=!1}=e;return d?(0,l.jsx)(R,{content:e.content}):(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)(I.w,{title:"Answer",animate:s,streaming:s,children:n?(0,l.jsx)(y,{message:e,isStreaming:s}):(0,l.jsx)(A,{})}),(0,l.jsx)(I.w,{title:"Sources",animate:s,children:a&&0!==a.length?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(L.LT,{results:a})}):(0,l.jsx)(L.qT,{})}),(0,l.jsx)(I.w,{title:"Images",animate:s,children:i&&i.length>0?(0,l.jsx)(T,{images:i}):(0,l.jsx)(P,{})}),r&&r.length>0&&(0,l.jsx)(I.w,{title:"Related",animate:s,children:(0,l.jsx)(k,{questions:r,onSelect:t})})]})}},3070:(e,s,t)=>{t.d(s,{gu:()=>h,LT:()=>u,qT:()=>x});var l=t(83451),a=t(66622),n=t(7232),r=t(86671),i=t(20480),d=t(18393);let o=i.bL,c=i.l9,m=a.forwardRef(({className:e,align:s="center",sideOffset:t=4,...a},n)=>(0,l.jsx)(i.UC,{ref:n,align:s,sideOffset:t,className:(0,d.cn)("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a}));m.displayName=i.UC.displayName;let x=()=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"flex flex-wrap w-full",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,l.jsx)("div",{className:"w-1/2 md:w-1/4 p-1",children:(0,l.jsx)(r.E,{className:"rounded-md shadow-none border-none h-[70px] bg-card "})},`skeleton-${s}`))})}),h=({url:e})=>(0,l.jsx)("div",{className:"rounded-full overflow-hidden relative",children:(0,l.jsx)("img",{className:"block relative",src:`https://www.google.com/s2/favicons?sz=128&domain=${e}`,alt:"favicon",width:16,height:16})});function u({results:e}){let[s,t]=(0,a.useState)(!1),r=s?e:e.slice(0,3),i=e.length>3?e.length-3:0,d=e.slice(3,3+i);return(0,l.jsxs)("div",{className:"flex flex-wrap w-full ",children:[r.map(({title:e,url:s,content:t},a)=>{let r=new URL(s).hostname.split(".").slice(-2,-1)[0];return(0,l.jsxs)(o,{children:[(0,l.jsx)(c,{asChild:!0,children:(0,l.jsx)("div",{className:"w-1/2 md:w-1/4 p-1",children:(0,l.jsx)("a",{className:"",href:s,target:"_blank",children:(0,l.jsx)(n.Zp,{className:"flex-1 rounded-md flex-col shadow-none border-none h-[70px]",children:(0,l.jsxs)(n.Wu,{className:"p-2 flex flex-col justify-between h-full",children:[(0,l.jsx)("p",{className:"text-xs line-clamp-2 font-medium text-foreground/80",children:e}),(0,l.jsxs)("div",{className:"flex space-x-1",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"rounded-full overflow-hidden relative",children:(0,l.jsx)(h,{url:s})}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground truncate font-medium",children:r})]}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground font-medium",children:"\xb7"}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground truncate font-medium",children:a+1})]})]})})})})}),(0,l.jsx)(m,{className:"w-80 py-2",children:(0,l.jsx)("div",{className:"flex justify-between space-x-4",children:(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"rounded-full overflow-hidden relative",children:(0,l.jsx)(h,{url:s})}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground truncate font-medium",children:r})]}),(0,l.jsx)("p",{className:"text-sm font-medium",children:e}),(0,l.jsx)("span",{className:"text-sm line-clamp-3 font-light text-foreground/90",children:t})]})})})]},`source-${a}`)}),!s&&i>0&&(0,l.jsx)("div",{className:"cursor-pointer w-1/2 md:w-1/4  p-1",onClick:()=>t(!0),children:(0,l.jsx)(n.Zp,{className:"flex-1 rounded-md flex-col shadow-none border-none h-[70px]",children:(0,l.jsxs)(n.Wu,{className:"p-2 flex flex-col justify-between h-full",children:[(0,l.jsx)("div",{className:"flex items-center space-x-2",children:d.map(({url:e},s)=>(0,l.jsx)(h,{url:e},`logo-${s}`))}),(0,l.jsxs)("div",{className:"text-xs text-muted-foreground truncate font-medium",children:["View ",i," more"]})]})})})]})}},15539:(e,s,t)=>{t.d(s,{w:()=>m});var l=t(83451),a=t(18393),n=t(58791),r=t(80027),i=t(66954),d=t(43506),o=t(92761),c=t(95972);let m=({title:e,children:s,animate:t=!0,streaming:m=!1})=>{let x={Sources:n.A,Answer:r.A,Related:i.A,Images:d.A}[e]||o.A;return(0,l.jsxs)("div",{className:(0,a.cn)("flex flex-col mb-8",t?"animate-in fade-in duration-1000 ease-out":""),children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:["Answer"===e&&m?(0,l.jsx)(c.P.div,{animate:{rotate:[0,360]},transition:{repeat:1/0,duration:1.5,ease:"linear"},children:(0,l.jsx)(x,{size:22})}):(0,l.jsx)(x,{size:22}),(0,l.jsx)("div",{className:"text-lg font-medium",children:e})]}),(0,l.jsx)("div",{className:"pt-1",children:s})]})}},86671:(e,s,t)=>{t.d(s,{E:()=>n});var l=t(83451),a=t(18393);function n({className:e,...s}){return(0,l.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-primary/10",e),...s})}},18018:(e,s,t)=>{t.d(s,{_:()=>n});var l=t(74640),a=t(6281);let n=(0,l.w)({server:{GROQ_API_KEY:a.Ay.string()},client:{NEXT_PUBLIC_API_URL:a.Ay.string(),NEXT_PUBLIC_LOCAL_MODE_ENABLED:a.Ay.boolean().default(!0),NEXT_PUBLIC_PRO_MODE_ENABLED:a.Ay.boolean().default(!0)},runtimeEnv:{NEXT_PUBLIC_API_URL:"localhost:3000",NEXT_PUBLIC_LOCAL_MODE_ENABLED:"false".toLowerCase()==="true",NEXT_PUBLIC_PRO_MODE_ENABLED:"false".toLowerCase()==="true",GROQ_API_KEY:process.env.GROQ_API_KEY}})}};